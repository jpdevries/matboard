!function(a){function b(d){if(c[d])return c[d].exports;var e=c[d]={exports:{},id:d,loaded:!1};return a[d].call(e.exports,e,e.exports,b),e.loaded=!0,e.exports}var c={};return b.m=a,b.c=c,b.p="",b(0)}([function(a,b,c){"use strict";var d=c(1);document.addEventListener("DOMContentLoaded",function(){new d.MetaBox})},function(a,b,c){"use strict";var d=(c(2),c(3)),e=c(4),f=c(5),g=c(13),h=function(){f.subscribe(function(){console.log(f.getState()),document.title="Editing "+f.getState().meta.pagetitle}),f.dispatch(e.updateMeta({pagetitle:"Hello World!"})),f.dispatch(e.updateMeta({template:1})),f.dispatch(e.updateSettings({searchable:!0,richText:!0})),f.dispatch(e.updatePublication({publishedon:new Date})),f.dispatch(e.updateMeta({pagetitle:"rad"})),f.dispatch(e.updateContent("This is content"));var a=(0,d.connect)(function(a,b){return{meta:a.meta,settings:a.settings,publication:a.publication,resourceGroups:a.resourceGroups,content:a.content}})(g);ReactDOM.render(React.createElement(d.Provider,{store:f},React.createElement(a,null)),document.getElementById("resource-edit-form"))};b.MetaBox=h},function(a,b){a.exports=Redux},function(a,b){a.exports=ReactRedux},function(a,b){"use strict";var c="updatemeta",d=function(a){return{type:c,meta:a}};b.UPDATE_META=c,b.updateMeta=d;var e="updatesettings",f=function(a){return{type:e,settings:a}};b.UPDATE_SETTINGS=e,b.updateSettings=f;var g="udpatepublication",h=function(a){return{type:g,publication:a}};b.UPDATE_PUBLICATION=g,b.updatePublication=h;var i="updateresourcegroup",j=function(a,b){return console.log("updateResourceGroup",a,b),{type:i,index:a,active:b}};b.UPDATE_RESOURCE_GROUP=i,b.updateResourceGroup=j;var k="updateresourcegroups",l=function(a){return{type:k,resourceGroups:a}};b.UPDATE_RESOURCE_GROUPS=k,b.updateResourceGroups=l;var m="updatecontent",n=function(a){return{type:m,content:a}};b.UPDATE_CONTENT=m,b.updateContent=n},function(a,b,c){"use strict";var d=c(2),e=d.createStore,f=c(6),g=e(f.resourceReducer);a.exports=g},function(a,b,c){"use strict";function d(a,b,c){return b in a?Object.defineProperty(a,b,{value:c,enumerable:!0,configurable:!0,writable:!0}):a[b]=c,a}var e=c(4),f=c(2).combineReducers,g=c(7),h={meta:{pagetitle:"",longtitle:"bacon",description:"",introtext:"",template:2,alias:"",menutitle:"",introtext:"intro text hello world",menuhide:!0,published:!0},settings:{parent:2,resourceType:"modResource",contentType:"html",contentDisposition:"inline",menuindex:3,container:!0,searchable:!0,richText:!0,freezeURI:!0,cacheable:!0,emptyCache:!0,deleted:!0},publication:{publishedon:new Date,publishedon:null,unpubdate:null},resourceGroups:[{name:"Group bacon!",id:0,active:!1},{name:"Group 2",id:1,active:!0},{name:"Group 3",id:2,active:!1}],content:""},i=function(a,b){switch(a=a||h.meta,b.type){case e.UPDATE_META:return Object.assign({},a,b.meta)}return a},j=function(a,b){switch(a=a||h.settings,console.log("settingsReducer",b.type),b.type){case e.UPDATE_SETTINGS:return Object.assign({},a,b.settings)}return a},k=function(a,b){switch(a=a||h.publication,b.type){case e.UPDATE_PUBLICATION:return Object.assign({},a,b.publication)}return a},l=function(a,b){switch(a=a||h.resourceGroups,b.type){case e.UPDATE_RESOURCE_GROUP:b.index;return console.log("resourceGroupsReducer",b,b.index),g(a,d({},b.index,{$merge:{active:b.active}}));case e.UPDATE_RESOURCE_GROUPS:}return a},m=function(a,b){switch(a=a||h.content,b.type){case e.UPDATE_CONTENT:return b.content}return a},n=f({meta:i,settings:j,publication:k,resourceGroups:l,content:m});b.resourceReducer=n},function(a,b,c){a.exports=c(8)},function(a,b,c){(function(b){"use strict";function d(a){return Array.isArray(a)?a.concat():a&&"object"==typeof a?g(new a.constructor,a):a}function e(a,c,d){Array.isArray(a)?void 0:"production"!==b.env.NODE_ENV?i(!1,"update(): expected target of %s to be an array; got %s.",d,a):i(!1);var e=c[d];Array.isArray(e)?void 0:"production"!==b.env.NODE_ENV?i(!1,"update(): expected spec of %s to be an array; got %s. Did you forget to wrap your parameter in an array?",d,e):i(!1)}function f(a,c){if("object"!=typeof c?"production"!==b.env.NODE_ENV?i(!1,"update(): You provided a key path to update() that did not contain one of %s. Did you forget to include {%s: ...}?",q.join(", "),n):i(!1):void 0,j.call(c,n))return 1!==Object.keys(c).length?"production"!==b.env.NODE_ENV?i(!1,"Cannot have more than one key in an object with %s",n):i(!1):void 0,c[n];var h=d(a);if(j.call(c,o)){var s=c[o];s&&"object"==typeof s?void 0:"production"!==b.env.NODE_ENV?i(!1,"update(): %s expects a spec of type 'object'; got %s",o,s):i(!1),h&&"object"==typeof h?void 0:"production"!==b.env.NODE_ENV?i(!1,"update(): %s expects a target of type 'object'; got %s",o,h):i(!1),g(h,c[o])}j.call(c,k)&&(e(a,c,k),c[k].forEach(function(a){h.push(a)})),j.call(c,l)&&(e(a,c,l),c[l].forEach(function(a){h.unshift(a)})),j.call(c,m)&&(Array.isArray(a)?void 0:"production"!==b.env.NODE_ENV?i(!1,"Expected %s target to be an array; got %s",m,a):i(!1),Array.isArray(c[m])?void 0:"production"!==b.env.NODE_ENV?i(!1,"update(): expected spec of %s to be an array of arrays; got %s. Did you forget to wrap your parameters in an array?",m,c[m]):i(!1),c[m].forEach(function(a){Array.isArray(a)?void 0:"production"!==b.env.NODE_ENV?i(!1,"update(): expected spec of %s to be an array of arrays; got %s. Did you forget to wrap your parameters in an array?",m,c[m]):i(!1),h.splice.apply(h,a)})),j.call(c,p)&&("function"!=typeof c[p]?"production"!==b.env.NODE_ENV?i(!1,"update(): expected spec of %s to be a function; got %s.",p,c[p]):i(!1):void 0,h=c[p](h));for(var t in c)r.hasOwnProperty(t)&&r[t]||(h[t]=f(a[t],c[t]));return h}var g=c(10),h=c(11),i=c(12),j={}.hasOwnProperty,k=h({$push:null}),l=h({$unshift:null}),m=h({$splice:null}),n=h({$set:null}),o=h({$merge:null}),p=h({$apply:null}),q=[k,l,m,n,o,p],r={};q.forEach(function(a){r[a]=!0}),a.exports=f}).call(b,c(9))},function(a,b){function c(){j&&g&&(j=!1,g.length?i=g.concat(i):k=-1,i.length&&d())}function d(){if(!j){var a=setTimeout(c);j=!0;for(var b=i.length;b;){for(g=i,i=[];++k<b;)g&&g[k].run();k=-1,b=i.length}g=null,j=!1,clearTimeout(a)}}function e(a,b){this.fun=a,this.array=b}function f(){}var g,h=a.exports={},i=[],j=!1,k=-1;h.nextTick=function(a){var b=new Array(arguments.length-1);if(arguments.length>1)for(var c=1;c<arguments.length;c++)b[c-1]=arguments[c];i.push(new e(a,b)),1!==i.length||j||setTimeout(d,0)},e.prototype.run=function(){this.fun.apply(null,this.array)},h.title="browser",h.browser=!0,h.env={},h.argv=[],h.version="",h.versions={},h.on=f,h.addListener=f,h.once=f,h.off=f,h.removeListener=f,h.removeAllListeners=f,h.emit=f,h.binding=function(a){throw new Error("process.binding is not supported")},h.cwd=function(){return"/"},h.chdir=function(a){throw new Error("process.chdir is not supported")},h.umask=function(){return 0}},function(a,b){"use strict";function c(a){if(null===a||void 0===a)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(a)}function d(){try{if(!Object.assign)return!1;var a=new String("abc");if(a[5]="de","5"===Object.getOwnPropertyNames(a)[0])return!1;for(var b={},c=0;10>c;c++)b["_"+String.fromCharCode(c)]=c;var d=Object.getOwnPropertyNames(b).map(function(a){return b[a]});if("0123456789"!==d.join(""))return!1;var e={};return"abcdefghijklmnopqrst".split("").forEach(function(a){e[a]=a}),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},e)).join("")}catch(f){return!1}}var e=Object.prototype.hasOwnProperty,f=Object.prototype.propertyIsEnumerable;a.exports=d()?Object.assign:function(a,b){for(var d,g,h=c(a),i=1;i<arguments.length;i++){d=Object(arguments[i]);for(var j in d)e.call(d,j)&&(h[j]=d[j]);if(Object.getOwnPropertySymbols){g=Object.getOwnPropertySymbols(d);for(var k=0;k<g.length;k++)f.call(d,g[k])&&(h[g[k]]=d[g[k]])}}return h}},function(a,b){"use strict";var c=function(a){var b;for(b in a)if(a.hasOwnProperty(b))return b;return null};a.exports=c},function(a,b,c){(function(b){"use strict";function c(a,c,d,e,f,g,h,i){if("production"!==b.env.NODE_ENV&&void 0===c)throw new Error("invariant requires an error message argument");if(!a){var j;if(void 0===c)j=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var k=[d,e,f,g,h,i],l=0;j=new Error(c.replace(/%s/g,function(){return k[l++]})),j.name="Invariant Violation"}throw j.framesToPop=1,j}}a.exports=c}).call(b,c(9))},function(a,b,c){"use strict";var d=c(4),e=c(5),f=function(a){return React.createElement("h1",null,a.pagetitle)},g=function(a){return React.createElement("div",{className:"button-bar"},React.createElement("div",null,React.createElement("button",{disabled:!a.save,type:"submit"},"Save")),React.createElement("div",null,React.createElement("button",{formaction:"/resource/duplicate"},"Duplicate")),React.createElement("div",null,React.createElement("button",null,"Delete")),React.createElement("div",null,React.createElement("button",{formaction:"/resource/preview",formtaget:"_blank"},"View")))},h=function(a){var b=a.meta,c=[{name:"Base Template",value:"0"},{name:"Blog Post",value:"1"},{name:"Product",value:"2"}],f=c.map(function(a){var c=a.value==b.template;return React.createElement("option",{selected:c,key:a.value,value:a.value},a.name)});return React.createElement("fieldset",null,React.createElement("legend",null,"Document"),React.createElement("div",{className:"field-group"},React.createElement("div",{className:"pagetitle-field"},React.createElement("label",{"for":"pagetitle"},"Pagetitle"),React.createElement("input",{type:"text",name:"pagetitle",value:b.pagetitle,onChange:function(a){return e.dispatch(d.updateMeta({pagetitle:a.target.value}))},required:!0})),React.createElement("div",{className:"longtitle-field"},React.createElement("label",{"for":"longtitle"},"Long Title"),React.createElement("input",{type:"text",name:"longtitle",value:b.longtitle,onChange:function(a){return e.dispatch(d.updateMeta({longtitle:a.target.value}))}})),React.createElement("div",{className:"description-field"},React.createElement("label",{"for":"description"},"Description"),React.createElement("textarea",{type:"text",name:"description",value:b.description,onChange:function(a){return e.dispatch(d.updateMeta({description:a.target.value}))}})),React.createElement("div",{className:"introtext-field"},React.createElement("label",{"for":"introtext"},"Intro Text"),React.createElement("textarea",{type:"text",name:"introtext",value:b.introtext,onChange:function(a){return e.dispatch(d.updateMeta({introtext:a.target.value}))}}))),React.createElement("div",{className:"field-group"},React.createElement("div",null,React.createElement("label",{"for":"template"},"Template ",b.template),React.createElement("select",{name:"template",onChange:function(a){return e.dispatch(d.updateMeta({template:a.target.value}))}},f)),React.createElement("div",{className:"alias-field"},React.createElement("label",{"for":"alias"},"Alias"),React.createElement("input",{type:"text",name:"alias",value:b.alias,onChange:function(a){return e.dispatch(d.updateMeta({alias:a.target.value}))}})),React.createElement("div",{className:"menutitle-field"},React.createElement("label",{"for":"menutitle"},"Menu Title"),React.createElement("input",{type:"text",name:"menutitle",value:b.menutitle,onChange:function(a){return e.dispatch(d.updateMeta({menutitle:a.target.value}))}})),React.createElement("div",{className:"link-attributes-field"},React.createElement("label",{"for":"link-attributes"},"Link Attributes"),React.createElement("input",{type:"text",name:"link-attributes",value:b.linkAttributes,onChange:function(a){return e.dispatch(d.updateMeta({linkAttributes:a.target.value}))}})),React.createElement("div",{className:"menuhide-field"},React.createElement("label",{"for":"menuhide"},"Hide From Menus"),React.createElement("input",{type:"checkbox",name:"menuhide",checked:b.menuhide,onChange:function(a){return e.dispatch(d.updateMeta({menuhide:a.target.checked}))}})),React.createElement("div",{className:"published-field"},React.createElement("label",{"for":"published"},"Published"),React.createElement("input",{type:"checkbox",name:"published",checked:b.published,onChange:function(a){return e.dispatch(d.updateMeta({published:a.target.checked}))}}))))},i=function(a){var b=a.settings,c=[{name:"",value:"0"},{name:"Blog (1)",value:"1"},{name:"Products (2)",value:"2"}],f=[{name:"Resource",value:"modResource"},{name:"Symlink",value:"modSymlink"},{name:"WebLink",value:"modWebLink"}],g=[{name:"Content",types:[{name:"HTML",value:"html"},{name:"JSON",value:"json"},{name:"PDF",value:"pdf"},{name:"RSS",value:"rss"},{name:"Text",value:"text"},{name:"XML",value:"xml"}]},{name:"Assets",types:[{name:"CSS",value:"css"},{name:"JavaScript",value:"js"}]}],h=c.map(function(a){return React.createElement("option",{selected:a.value==b.parent,key:a.value,value:a.value},a.name)}),i=f.map(function(a){return React.createElement("option",{selected:a.value==b.resourceType,key:a.value,value:a.value},a.name)}),j=g.map(function(a){var c=a.types.map(function(a){return React.createElement("option",{selected:a.value==b.contentType,key:a.value,value:a.value},a.name)});return React.createElement("optgroup",{label:a.name},c)});return React.createElement("fieldset",null,React.createElement("legend",null,"Settings"),React.createElement("div",{className:"field-group"},React.createElement("div",{className:"parent-resource-field"},React.createElement("label",{"for":"parent-resource"},"Parent Resource"),React.createElement("select",{name:"parent-resource",onChange:function(a){return e.dispatch(d.updateSettings({parent:a.target.value}))}},h)),React.createElement("div",{className:"resource-type-field"},React.createElement("label",{"for":"resource-type"},"Resource Type"),React.createElement("select",{name:"resource-type",onChange:function(a){return e.dispatch(d.updateSettings({resourceType:a.target.value}))}},i)),React.createElement("div",{className:"field content-type-field"},React.createElement("label",{"for":"content_type"},"Content Type"),React.createElement("select",{name:"content_type",onChange:function(a){return e.dispatch(d.updateSettings({contentType:a.target.value}))}},j)),React.createElement("div",{className:"field field-content_disposition"},React.createElement("label",{"for":"content_disposition"},"Content Disposition"),React.createElement("input",{type:"radio",checked:"inline"==b.contentDisposition,value:"inline",name:"content_disposition",onChange:function(a){return e.dispatch(d.updateSettings({contentDisposition:a.target.value}))}}),"Inline",React.createElement("br",null),React.createElement("input",{type:"radio",checked:"attachment"==b.contentDisposition,value:"attachment",name:"content_disposition",onChange:function(a){return e.dispatch(d.updateSettings({contentDisposition:a.target.value}))}}),"Attachment"),React.createElement("div",{className:"field field-menuindex"},React.createElement("label",{"for":"menuindex"},"Menu Index"),React.createElement("input",{type:"number",name:"menuindex",value:b.menuindex,min:"0",step:"1",onChange:function(a){return e.dispatch(d.updateSettings({menuindex:a.target.value}))}}))),React.createElement("div",{className:"field-group"},React.createElement("fieldset",{className:"checbox-field"},React.createElement("legend",null,"Booleans"),React.createElement("label",{"for":"container"},React.createElement("input",{name:"container",checked:b.container,type:"checkbox",onChange:function(a){return e.dispatch(d.updateSettings({container:a.target.checked}))}}),"  Container"),React.createElement("label",{"for":"searchable"},React.createElement("input",{name:"searchable",checked:b.searchable,type:"checkbox",onChange:function(a){return e.dispatch(d.updateSettings({searchable:a.target.checked}))}}),"  Searchable"),React.createElement("label",{"for":"richText"},React.createElement("input",{name:"richText",checked:b.richText,type:"checkbox",onChange:function(a){return e.dispatch(d.updateSettings({richText:a.target.checked}))}}),"  Rich Text"),React.createElement("label",{"for":"freezeURI"},React.createElement("input",{name:"freezeURI",checked:b.freezeURI,type:"checkbox",onChange:function(a){return e.dispatch(d.updateSettings({freezeURI:a.target.checked}))}}),"  Freeze URI"),React.createElement("label",{"for":"cacheable"},React.createElement("input",{name:"cacheable",checked:b.cacheable,type:"checkbox",onChange:function(a){return e.dispatch(d.updateSettings({cacheable:a.target.checked}))}}),"  Cacheable"),React.createElement("label",{"for":"emptyCache"},React.createElement("input",{name:"emptyCache",checked:b.emptyCache,type:"checkbox",onChange:function(a){return e.dispatch(d.updateSettings({emptyCache:a.target.checked}))}}),"  Empty Cache"),React.createElement("label",{"for":"deleted"},React.createElement("input",{name:"deleted",checked:b.deleted,type:"checkbox",onChange:function(a){return e.dispatch(d.updateSettings({deleted:a.target.checked}))}}),"  Deleted"))))},j=function(a){var b=a.publication;return React.createElement("fieldset",null,React.createElement("legend",null,"Publication"),React.createElement("div",{className:"field-group"},React.createElement("div",{className:"field field-publishedon"},React.createElement("label",{"for":"publishedon"},"Published On"),React.createElement("input",{type:"datetime",name:"publishedon",value:b.publishedon,onChange:function(a){return e.dispatch(d.updatePublication({publishedon:a.target.value}))}})),React.createElement("div",{className:"field field-pubdate"},React.createElement("label",{"for":"pubdate"},"Published Date"),React.createElement("input",{type:"datetime",name:"pubdate",value:b.pubdate,onChange:function(a){return e.dispatch(d.updatePublication({pubdate:a.target.value}))}})),React.createElement("div",null,React.createElement("label",{"for":"unpubdate"},"Unpublish date"),React.createElement("input",{type:"datetime",name:"unpubdate",onChange:function(a){return e.dispatch(d.updatePublication({unpubdate:a.target.value}))}}))))},k=function(a){var b=a.resourceGroups,c=b.map(function(a,b){return React.createElement("tr",null,React.createElement("td",null,a.name),React.createElement("td",null,React.createElement("label",{"for":"rsgrp-"+a.id+"-access"},React.createElement("input",{type:"checkbox",checked:a.active,name:"rsgrp-"+a.id+"-access",onChange:function(a){return e.dispatch(d.updateResourceGroup(b,a.target.checked))}}))))});return React.createElement("fieldset",null,React.createElement("legend",null,"Resource Groups"),React.createElement("p",null,"Here you can select which Resource Group this Resource belongs to."),React.createElement("table",{className:"resource-groups"},React.createElement("thead",null,React.createElement("tr",null,React.createElement("th",null,"Name"),React.createElement("th",null,"Access"))),c))},l=function(a){return React.createElement("fieldset",{className:"content"},React.createElement("legend",null,"Content"),React.createElement("label",{"for":"content"},"Content"),React.createElement("textarea",{name:"content",cols:"30",rows:"10",onChange:function(a){return e.dispatch(d.updateContent(a.target.value))}},a.content))},m=React.createClass({displayName:"ResourceEditForm",render:function(){return React.createElement("div",null,React.createElement(f,{pagetitle:this.props.meta.pagetitle}),React.createElement("form",null,React.createElement(g,{save:this.props.meta.pagetitle.length>0}),React.createElement(h,{meta:this.props.meta}),React.createElement(i,{settings:this.props.settings}),React.createElement(j,{publication:this.props.publication}),React.createElement(k,{resourceGroups:this.props.resourceGroups}),React.createElement(l,{content:this.props.content}),React.createElement("footer",null,React.createElement(g,{save:this.props.meta.pagetitle.length>0}))))}});a.exports=m}]);