<!DOCTYPE html>
<html class="no-js">
  <head>
    <meta charset="utf-8">
    <title>Settings</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" href="assets/css/main.css">
    <script type="text/javascript" src="assets/js/vendor/modernizr.js"></script>
  </head>
  <body>
    <header>
      <h1>System Settings</h1>
      <div class="create-setting-module">
        <script>document.write('<button id="create-setting">Create Setting</button>')</script>
        <form action="#" class="create-setting-form" js-hidden>
          <fieldset>
            <legend>Create Setting</legend>
            <div>
              <div>
                <label for="setting-key">Key</label>
                <input type="text" name="setting-key" required>
              </div>
              <div>
                <label for="setting-name">Name</label>
                <input type="text" name="setting-name" required>
              </div>
              <div>
                <label for="setting-description">Description</label>
                <textarea name="setting-description" rows="2"></textarea>
              </div>
            </div>
            <div>
              <div>
                <label for="setting-field-type">Field Type</label>
                <select name="setting-field-type">
                  <option checked value="textfield">Textfield</option>
                  <option value="textarea">Textarea</option>
                  <option value="boolean">Yes/No</option>
                  <option value="password">Password</option>
                  <option value="category">Category</option>
                  <option value="charset">Charset</option>
                  <option value="charset">Charset</option>
                  <option value="country">Country</option>
                  <option value="context">Context</option>
                  <option value="country">Country</option>
                  <option value="context">Context</option>
                  <option value="namespace">Namespace</option>
                  <option value="template">Template</option>
                  <option value="user">User</option>
                  <option value="user-group">User Group</option>
                  <option value="language">Language</option>
                  <option value="source">Source</option>
                  <option value="manager-theme">Manager Theme</option>
                </select>
              </div>
              <div>
                <label for="setting-namespace">Namespace</label>
                <select name="setting-namespace" id="">
                  <option checked value="core">core</option>
                  <option value="ace">ace</option>
                  <option value="contentblocks">contentblocks</option>
                  <option value="redactor">redactor</option>
                  <option value="commerce">commerce</option>
                </select>
              </div>
              <div>
                <label for="lexicon-entry">Area Lexicon Entry</label>
                <input type="text" name="lexicon-entry">
              </div>
            </div>
            <footer>
              <div>
                <label for="setting-value">Value</label>
                <input type="text" name="setting-value" required>
              </div>
              <button type="submit">Create Setting</button>
            </footer>
          </fieldset>
        </form>
      </div>
      <div>
        <form action="#" class="search-settings">
          <label for="search-settings"><input name="search-settings" type="text" placeholder="Search for any System Setting. We'll try and find it."></label>
          <button type="submit">Search</button>
          <label for="filter-by">Filter by:</label>
          <select name="filter-by" id="filter-by">
            <option checked value="">All</option>
            <option value="core">core</option>
            <option value="ace">ace</option>
            <option value="contentblocks">contentblocks</option>
            <option value="redactor">redactor</option>
            <option value="commerce">commerce</option>
          </select>
        </form>
        <p>Below you will find the 4 most recently updated System Settings for each namespace.</p>
      </div>
    </header>
    <div class="settings-grid">
      <section id="core-settings">
        <header>
          <h2>core</h2>
        </header>
        <form>
          <table class="settings-table">
            <thead>
              <tr>
                <th>Setting</th>
                <th>Value</th>
              </tr>
            </thead>
            <tbody>
              <tr tabindex="0">
                <td>site_title</td>
                <td>MODX Revolution</td>
              </tr>
              <tr class="contextual-setting" js-hidden>
                <td colspan="2">
                    <div>
                      <label><input type="text" tabindex="0" name="site_title" placeholder="MODX Revolution" /></label>
                      <p>The title of your site</p>
                      <button type="submit" class="save">Save</button>
                      <button type="submit" formaction="delete/settting">Delete</button>
                    </div>
                </td>
              </tr>

              <tr tabindex="0">
                <td>media_source</td>
                <td>Filesystem</td>
              </tr>
              <tr class="contextual-setting" js-hidden>
                <td colspan="2">
                  <label for="media_source">MediaSource</label>
                  <select tabindex="0" name="media_source">
                    <option checked value="0">Filesystem</option>
                    <option value="1">Amazon S3</option>
                    <option value="2">Assets</option>
                  </select>
                  <div>
                    <p>The default media source for browsing and uploading files.</p>
                    <button type="submit" class="save">Save</button>
                    <button type="submit" formaction="delete/settting">Delete</button>
                  </div>
                </td>
              </tr>

              <tr tabindex="0">
                <td>clipsJSON</td>
                <td>{...}</td>
              </tr>
              <tr class="contextual-setting" js-hidden>
                <td colspan="2">
                  <label for="clipsjson">Clips JSON</label>
                  <textarea name="clipsjson" rows="8" cols="40">[{"title":"$ Dollar Sign","clip":"$"},
  {"title":"€ Euro Sign","clip":"€"},
  {"title":"¢ Cent Sign","clip":"¢"},
  {"title":"£ Pound Sign","clip":"£"},
  {"title":"¤ Currency Sign","clip":"¤"},
  {"title":"¥ Yen Sign","clip":"¥"},
  {"title":"ƒ Florin Sign","clip":"ƒ"}]</textarea>
                  <div>
                    <p>Set to properly formatted JSON for use with the Redactor Clips Plugin. Leave empty to disable the plugin.</p>
                    <button type="submit" class="save">Save</button>
                    <button type="submit" formaction="delete/settting">Delete</button>
                  </div>
                </td>
              </tr>

              <tr tabindex="0">
                <td>useContentDeliveryNetworks</td>
                <td>Yes</td>
              </tr>
              <tr class="contextual-setting" js-hidden>
                <td colspan="2">
                  <label for="use-cdn">Use CDNs</label>
                  <input type="checkbox" name="use-cdn" checked>
                  <p>Content Delivery Networks leverage the browser cache by serving common libraries and frameworks from the network nearest you. Disabling this setting will serve assets from your local server instead.</p>
                  <div>
                    <button type="submit" class="save">Save</button>
                    <button type="submit" formaction="delete/settting">Delete</button>
                  </div>
                </td>
              </tr>
            </tbody>
          </table>
          <footer js-hidden>
            <button type="submit" class="save">Save</button>
            <button type="submit" formaction="delete/settting">Delete</button>
          </footer>
        </form>
        <footer>
          <p><a href="#">View all</a></p>
        </footer>
      </section>

      <section id="core-settings">
        <header>
          <h2>ace</h2>
        </header>
        <form>
          <table class="settings-table">
            <thead>
              <tr>
                <th>Setting</th>
                <th>Value</th>
              </tr>
            </thead>
            <tbody>
              <tr tabindex="0">
                <td>site_title</td>
                <td>MODX Revolution</td>
              </tr>
              <tr class="contextual-setting" js-hidden>
                <td colspan="2">
                    <label><input type="text" tabindex="0" name="site_title" placeholder="MODX Revolution" /></label>
                    <div>
                      <p>The title of your site.</p>
                      <button type="submit" class="save">Save</button>
                      <button type="submit" formaction="delete/settting">Delete</button>
                    </div>
                </td>
              </tr>

              <tr tabindex="0">
                <td>media_source</td>
                <td>Filesystem</td>
              </tr>
              <tr class="contextual-setting" js-hidden>
                <td colspan="2">
                  <label for="media_source">MediaSource</label>
                  <select tabindex="0" name="media_source">
                    <option checked value="0">Filesystem</option>
                    <option value="1">Amazon S3</option>
                    <option value="2">Assets</option>
                  </select>
                  <div>
                    <p>The default media source for browsing and uploading files.</p>
                    <button type="submit" class="save">Save</button>
                    <button type="submit" formaction="delete/settting">Delete</button>
                  </div>
                </td>
              </tr>

              <tr tabindex="0">
                <td>clipsJSON</td>
                <td>{...}</td>
              </tr>
              <tr class="contextual-setting" js-hidden>
                <td colspan="2">
                  <label for="clipsjson">Clips JSON</label>
                  <textarea name="clipsjson" rows="8" cols="40">[{"title":"$ Dollar Sign","clip":"$"},
  {"title":"€ Euro Sign","clip":"€"},
  {"title":"¢ Cent Sign","clip":"¢"},
  {"title":"£ Pound Sign","clip":"£"},
  {"title":"¤ Currency Sign","clip":"¤"},
  {"title":"¥ Yen Sign","clip":"¥"},
  {"title":"ƒ Florin Sign","clip":"ƒ"}]</textarea>
                  <div>
                    <p>Set to properly formatted JSON for use with the Redactor Clips Plugin. Leave empty to disable the plugin.</p>
                    <button type="submit" class="save">Save</button>
                    <button type="submit" formaction="delete/settting">Delete</button>
                  </div>
                </td>
              </tr>

              <tr tabindex="0">
                <td>useContentDeliveryNetworks</td>
                <td>Yes</td>
              </tr>
              <tr class="contextual-setting" js-hidden>
                <td colspan="2">
                  <label for="use-cdn">Use CDNs</label>
                  <input type="checkbox" name="use-cdn" checked>
                  <p>Content Delivery Networks leverage the browser cache by serving common libraries and frameworks from the network nearest you. Disabling this setting will serve assets from your local server instead.</p>
                  <div>
                    <button type="submit" class="save">Save</button>
                    <button type="submit" formaction="delete/settting">Delete</button>
                  </div>
                </td>
              </tr>
            </tbody>
          </table>
          <footer js-hidden>
            <button type="submit" class="save">Save</button>
            <button type="submit" formaction="delete/settting">Delete</button>
          </footer>
        </form>
        <footer>
          <p><a href="#">View all</a></p>
        </footer>
      </section>

      <section id="core-settings">
        <header>
          <h2>contentblocks</h2>
        </header>
        <form>
          <table class="settings-table">
            <thead>
              <tr>
                <th>Setting</th>
                <th>Value</th>
              </tr>
            </thead>
            <tbody>
              <tr tabindex="0">
                <td>site_title</td>
                <td>MODX Revolution</td>
              </tr>
              <tr class="contextual-setting" js-hidden>
                <td colspan="2">
                    <label><input type="text" tabindex="0" name="site_title" placeholder="MODX Revolution" /></label>
                    <div>
                      <p>The title of your site.</p>
                      <button type="submit" class="save">Save</button>
                      <button type="submit" formaction="delete/settting">Delete</button>
                    </div>
                </td>
              </tr>

              <tr tabindex="0">
                <td>media_source</td>
                <td>Filesystem</td>
              </tr>
              <tr class="contextual-setting" js-hidden>
                <td colspan="2">
                  <label for="media_source">MediaSource</label>
                  <select tabindex="0" name="media_source">
                    <option checked value="0">Filesystem</option>
                    <option value="1">Amazon S3</option>
                    <option value="2">Assets</option>
                  </select>
                  <div>
                    <p>The default media source for browsing and uploading files.</p>
                    <button type="submit" class="save">Save</button>
                    <button type="submit" formaction="delete/settting">Delete</button>
                  </div>
                </td>
              </tr>

              <tr tabindex="0">
                <td>clipsJSON</td>
                <td>{...}</td>
              </tr>
              <tr class="contextual-setting" js-hidden>
                <td colspan="2">
                  <label for="clipsjson">Clips JSON</label>
                  <textarea name="clipsjson" rows="8" cols="40">[{"title":"$ Dollar Sign","clip":"$"},
  {"title":"€ Euro Sign","clip":"€"},
  {"title":"¢ Cent Sign","clip":"¢"},
  {"title":"£ Pound Sign","clip":"£"},
  {"title":"¤ Currency Sign","clip":"¤"},
  {"title":"¥ Yen Sign","clip":"¥"},
  {"title":"ƒ Florin Sign","clip":"ƒ"}]</textarea>
                  <div>
                    <p>Set to properly formatted JSON for use with the Redactor Clips Plugin. Leave empty to disable the plugin.</p>
                    <button type="submit" class="save">Save</button>
                    <button type="submit" formaction="delete/settting">Delete</button>
                  </div>
                </td>
              </tr>

              <tr tabindex="0">
                <td>useContentDeliveryNetworks</td>
                <td>Yes</td>
              </tr>
              <tr class="contextual-setting" js-hidden>
                <td colspan="2">
                  <label for="use-cdn">Use CDNs</label>
                  <input type="checkbox" name="use-cdn" checked>
                  <p>Content Delivery Networks leverage the browser cache by serving common libraries and frameworks from the network nearest you. Disabling this setting will serve assets from your local server instead.</p>
                  <div>
                    <button type="submit" class="save">Save</button>
                    <button type="submit" formaction="delete/settting">Delete</button>
                  </div>
                </td>
              </tr>
            </tbody>
          </table>
        </form>
        <footer>
          <p><a href="#">View all</a></p>
        </footer>
      </section>

      <section id="core-settings">
        <header>
          <h2>redactor</h2>
        </header>
        <form>
          <table class="settings-table">
            <thead>
              <tr>
                <th>Setting</th>
                <th>Value</th>
              </tr>
            </thead>
            <tbody>
              <tr tabindex="0">
                <td>site_title</td>
                <td>MODX Revolution</td>
              </tr>
              <tr class="contextual-setting" js-hidden>
                <td colspan="2">
                    <label><input type="text" tabindex="0" name="site_title" placeholder="MODX Revolution" /></label>
                    <div>
                      <p>The title of your site.</p>
                      <button type="submit" class="save">Save</button>
                      <button type="submit" formaction="delete/settting">Delete</button>
                    </div>
                </td>
              </tr>

              <tr tabindex="0">
                <td>media_source</td>
                <td>Filesystem</td>
              </tr>
              <tr class="contextual-setting" js-hidden>
                <td colspan="2">
                  <label for="media_source">MediaSource</label>
                  <select tabindex="0" name="media_source">
                    <option checked value="0">Filesystem</option>
                    <option value="1">Amazon S3</option>
                    <option value="2">Assets</option>
                  </select>
                  <div>
                    <p>The default media source for browsing and uploading files.</p>
                    <button type="submit" class="save">Save</button>
                    <button type="submit" formaction="delete/settting">Delete</button>
                  </div>
                </td>
              </tr>

              <tr tabindex="0">
                <td>clipsJSON</td>
                <td>{...}</td>
              </tr>
              <tr class="contextual-setting" js-hidden>
                <td colspan="2">
                  <label for="clipsjson">Clips JSON</label>
                  <textarea name="clipsjson" rows="8" cols="40">[{"title":"$ Dollar Sign","clip":"$"},
  {"title":"€ Euro Sign","clip":"€"},
  {"title":"¢ Cent Sign","clip":"¢"},
  {"title":"£ Pound Sign","clip":"£"},
  {"title":"¤ Currency Sign","clip":"¤"},
  {"title":"¥ Yen Sign","clip":"¥"},
  {"title":"ƒ Florin Sign","clip":"ƒ"}]</textarea>
                  <div>
                    <p>Set to properly formatted JSON for use with the Redactor Clips Plugin. Leave empty to disable the plugin.</p>
                    <button type="submit" class="save">Save</button>
                    <button type="submit" formaction="delete/settting">Delete</button>
                  </div>
                </td>
              </tr>

              <tr tabindex="0">
                <td>useContentDeliveryNetworks</td>
                <td>Yes</td>
              </tr>
              <tr class="contextual-setting" js-hidden>
                <td colspan="2">
                  <label for="use-cdn">Use CDNs</label>
                  <input type="checkbox" name="use-cdn" checked>
                  <p>Content Delivery Networks leverage the browser cache by serving common libraries and frameworks from the network nearest you. Disabling this setting will serve assets from your local server instead.</p>
                  <div>
                    <button type="submit" class="save">Save</button>
                    <button type="submit" formaction="delete/settting">Delete</button>
                  </div>
                </td>
              </tr>
            </tbody>
          </table>
        </form>
        <footer>
          <p><a href="#">View all</a></p>
        </footer>
      </section>

      <section id="core-settings">
        <header>
          <h2>commerce</h2>
        </header>
        <form>
          <table class="settings-table">
            <thead>
              <tr>
                <th>Setting</th>
                <th>Value</th>
              </tr>
            </thead>
            <tbody>
              <tr tabindex="0">
                <td>site_title</td>
                <td>MODX Revolution</td>
              </tr>
              <tr class="contextual-setting" js-hidden>
                <td colspan="2">
                    <label><input type="text" tabindex="0" name="site_title" placeholder="MODX Revolution" /></label>
                    <div>
                      <p>The title of your site.</p>
                      <button type="submit" class="save">Save</button>
                    </div>
                </td>
              </tr>

              <tr tabindex="0">
                <td>media_source</td>
                <td>Filesystem</td>
              </tr>
              <tr class="contextual-setting" js-hidden>
                <td colspan="2">
                  <label for="media_source">MediaSource</label>
                  <select tabindex="0" name="media_source">
                    <option checked value="0">Filesystem</option>
                    <option value="1">Amazon S3</option>
                    <option value="2">Assets</option>
                  </select>
                  <div>
                    <p>The default media source for browsing and uploading files.</p>
                    <button type="submit" class="save">Save</button>
                  </div>
                </td>
              </tr>

              <tr tabindex="0">
                <td>clipsJSON</td>
                <td>{...}</td>
              </tr>
              <tr class="contextual-setting" js-hidden>
                <td colspan="2">
                  <label for="clipsjson">Clips JSON</label>
                  <textarea name="clipsjson" rows="8" cols="40">[{"title":"$ Dollar Sign","clip":"$"},
  {"title":"€ Euro Sign","clip":"€"},
  {"title":"¢ Cent Sign","clip":"¢"},
  {"title":"£ Pound Sign","clip":"£"},
  {"title":"¤ Currency Sign","clip":"¤"},
  {"title":"¥ Yen Sign","clip":"¥"},
  {"title":"ƒ Florin Sign","clip":"ƒ"}]</textarea>
                  <div>
                    <p>Set to properly formatted JSON for use with the Redactor Clips Plugin. Leave empty to disable the plugin.</p>
                    <button type="submit" class="save">Save</button>
                    <button type="submit" formaction="delete/settting">Delete</button>
                  </div>
                </td>
              </tr>

              <tr tabindex="0">
                <td>useContentDeliveryNetworks</td>
                <td>Yes</td>
              </tr>
              <tr class="contextual-setting" js-hidden>
                <td colspan="2">
                  <label for="use-cdn">Use CDNs</label>
                  <input type="checkbox" name="use-cdn" checked>
                  <p>Content Delivery Networks leverage the browser cache by serving common libraries and frameworks from the network nearest you. Disabling this setting will serve assets from your local server instead.</p>
                  <div>
                    <button type="submit" class="save">Save</button>
                    <button type="submit" formaction="delete/settting">Delete</button>
                  </div>
                </td>
              </tr>
            </tbody>
          </table>
        </form>
        <footer>
          <p><a href="#">View all</a></p>
        </footer>
      </section>
    </div>

    <script src="https://code.jquery.com/jquery-1.12.2.min.js"></script>
    <script src="./assets/js/vendor/JSONarea/JSONarea.min.js"></script>
    <!--script>window.jQuery || document.write('<script src="js/vendor/jquery-1.12.2.min.js"><\/script>')</script-->

    <script type="text/javascript">
      $('.settings-table').each(function(){
        $(this).on( 'focusin click', 'tbody > tr:not(.contextual-setting)', function(e) {
          $(this).addClass('open').siblings('.open').removeClass('open');
        });
      });
    </script>

    <script type="text/javascript">
      $("#create-setting").on('click',function(e){
        $('.create-setting-form').removeAttr('js-hidden');
        $('input[name="setting-key"]').focus();
        $(this).remove();
      });
    </script>

    <script type="text/javascript">
      var forEach = function (array, callback, scope) { // https://css-tricks.com/snippets/javascript/loop-queryselectorall-matches/
        for (var i = 0; i < array.length; i++) {
          callback.call(scope, i, array[i]);
        }
      };
      // for any text area with json in the name, valid the input with JSONarea
      var jsonAreas = document.querySelectorAll('textarea[name*="json"]'); // http://code.tutsplus.com/tutorials/the-30-css-selectors-you-must-memorize--net-16048
      forEach(jsonAreas, function(index,textarea){
        var jsonArea = JSONArea(textarea,{
          sourceObjects:[] // optional array of objects for JSONArea to inherit from
        });

        var btn = $(textarea).closest('td').find('button.save');

        // then here's how you use JSONArea's update event
        jsonArea.getElement().addEventListener('update',function(e){
          if(e.detail.isJSON) {
            // do something
            btn.removeAttr('disabled');
          } else {
            // do something else
            btn.attr('disabled','');
          }
        });

      });
    </script>

  </body>
</html>
