!function(a){function b(d){if(c[d])return c[d].exports;var e=c[d]={exports:{},id:d,loaded:!1};return a[d].call(e.exports,e,e.exports,b),e.loaded=!0,e.exports}var c={};return b.m=a,b.c=c,b.p="",b(0)}([function(a,b,c){"use strict";var d=c(1);document.addEventListener("DOMContentLoaded",function(){new d.ManageUsers})},function(a,b,c){"use strict";var d=(c(2),c(3)),e=c(4),f=c(5),g=c(13),h=function(){f.subscribe(function(){console.log(f.getState())}),f.dispatch(e.addUserGroup({title:"modmore"})),f.dispatch(e.addUser({username:"marcjenkins",givenName:"Marc",familyName:"Jenkins",email:"marc@modmore.com",active:!0,sudo:!0,jobTitle:"Marketing Director",userGroups:[1]})),f.dispatch(e.addUserToGroup(0,2));var a=(0,d.connect)(function(a,b){return{users:a.users.sort(function(a,b){return a.username>b.username?1:-1}),userGroups:a.userGroups}})(g);ReactDOM.render(React.createElement(d.Provider,{store:f},React.createElement(a,null)),document.getElementById("manage-users-form"))};b.ManageUsers=h},function(a,b){a.exports=Redux},function(a,b){a.exports=ReactRedux},function(a,b){"use strict";var c="updateuser",d=function(a,b){return{type:c,id:a,user:b}};b.UPDATE_USER=c,b.updateUser=d;var e="addusergroup",f=function(a){return{type:e,userGroup:a}};b.ADD_USER_GROUP=e,b.addUserGroup=f;var g="addusertogroup",h=function(a,b){return{type:g,id:a,group:b}};b.ADD_USER_TO_GROUP=g,b.addUserToGroup=h;var i="removeuserfromgroup",j=function(a,b){return console.log("ru",a,b),{type:i,id:a,group:b}};b.REMOVE_USER_FROM_GROUP=i,b.removeUserFromGroup=j;var k="adduser",l=function(a){return{type:k,user:a}};b.ADD_USER=k,b.addUser=l},function(a,b,c){"use strict";var d=c(2),e=d.createStore,f=c(6),g=e(f.manageUsersReducer);a.exports=g},function(a,b,c){"use strict";function d(a,b,c){return b in a?Object.defineProperty(a,b,{value:c,enumerable:!0,configurable:!0,writable:!0}):a[b]=c,a}var e=c(4),f=c(2).combineReducers,g=c(7),h={users:[{id:0,username:"jpdevries",givenName:"John-Paul",familyName:"de Vries",email:"mail@devries.jp",active:!0,sudo:!1,jobTitle:"Redactor Lead Developer",userGroups:[1]},{id:1,username:"markh",givenName:"Mark",familyName:"Hamstra",email:"mark@modmore.com",active:!0,sudo:!0,jobTitle:"modmore Founder",userGroups:[0,1]}],userGroups:[{id:0,title:"Administrators"},{id:1,title:"Editors"}],quickCreate:{username:"jpdevries",givenName:"John-Paul",familyName:"de Vries",email:"mail@devries.jp",active:!0,sudo:!0}},i=function(a,b){a=a||h.users,console.log(b);var c=0;switch(a.map(function(a,d){a.id==b.id&&(c=d)}),b.type){case e.UPDATE_USER:return g(a,d({},c,{$merge:b.user}));case e.ADD_USER_TO_GROUP:return g(a,d({},c,{$apply:function(a){return g(a,{$merge:{userGroups:g(a.userGroups,{$push:[b.group]})}})}}));case e.REMOVE_USER_FROM_GROUP:return g(a,d({},c,{$apply:function(d){return g(d,{$merge:{userGroups:a[c].userGroups.map(function(a){return a!==b.group?a:void 0}).filter(function(a){return void 0!==a})}})}}));case e.ADD_USER:if(void 0===b.user.id){var f=0;a.map(function(a,b){f=Math.max(a.id,f)}),b.user.id=f+1}return g(a,{$push:[b.user]})}return a},j=function(a,b){return a=a||h.quickCreate},k=function(a,b){switch(a=a||h.userGroups,b.type){case e.ADD_USER_GROUP:if(void 0===b.userGroup.id){var c=0;a.map(function(a,b){c=Math.max(a.id,c)}),b.userGroup.id=c+1}return g(a,{$push:[b.userGroup]})}return a},l=f({quickCreate:j,users:i,userGroups:k});b.manageUsersReducer=l},function(a,b,c){a.exports=c(8)},function(a,b,c){(function(b){"use strict";function d(a){return Array.isArray(a)?a.concat():a&&"object"==typeof a?g(new a.constructor,a):a}function e(a,c,d){Array.isArray(a)?void 0:"production"!==b.env.NODE_ENV?i(!1,"update(): expected target of %s to be an array; got %s.",d,a):i(!1);var e=c[d];Array.isArray(e)?void 0:"production"!==b.env.NODE_ENV?i(!1,"update(): expected spec of %s to be an array; got %s. Did you forget to wrap your parameter in an array?",d,e):i(!1)}function f(a,c){if("object"!=typeof c?"production"!==b.env.NODE_ENV?i(!1,"update(): You provided a key path to update() that did not contain one of %s. Did you forget to include {%s: ...}?",q.join(", "),n):i(!1):void 0,j.call(c,n))return 1!==Object.keys(c).length?"production"!==b.env.NODE_ENV?i(!1,"Cannot have more than one key in an object with %s",n):i(!1):void 0,c[n];var h=d(a);if(j.call(c,o)){var s=c[o];s&&"object"==typeof s?void 0:"production"!==b.env.NODE_ENV?i(!1,"update(): %s expects a spec of type 'object'; got %s",o,s):i(!1),h&&"object"==typeof h?void 0:"production"!==b.env.NODE_ENV?i(!1,"update(): %s expects a target of type 'object'; got %s",o,h):i(!1),g(h,c[o])}j.call(c,k)&&(e(a,c,k),c[k].forEach(function(a){h.push(a)})),j.call(c,l)&&(e(a,c,l),c[l].forEach(function(a){h.unshift(a)})),j.call(c,m)&&(Array.isArray(a)?void 0:"production"!==b.env.NODE_ENV?i(!1,"Expected %s target to be an array; got %s",m,a):i(!1),Array.isArray(c[m])?void 0:"production"!==b.env.NODE_ENV?i(!1,"update(): expected spec of %s to be an array of arrays; got %s. Did you forget to wrap your parameters in an array?",m,c[m]):i(!1),c[m].forEach(function(a){Array.isArray(a)?void 0:"production"!==b.env.NODE_ENV?i(!1,"update(): expected spec of %s to be an array of arrays; got %s. Did you forget to wrap your parameters in an array?",m,c[m]):i(!1),h.splice.apply(h,a)})),j.call(c,p)&&("function"!=typeof c[p]?"production"!==b.env.NODE_ENV?i(!1,"update(): expected spec of %s to be a function; got %s.",p,c[p]):i(!1):void 0,h=c[p](h));for(var t in c)r.hasOwnProperty(t)&&r[t]||(h[t]=f(a[t],c[t]));return h}var g=c(10),h=c(11),i=c(12),j={}.hasOwnProperty,k=h({$push:null}),l=h({$unshift:null}),m=h({$splice:null}),n=h({$set:null}),o=h({$merge:null}),p=h({$apply:null}),q=[k,l,m,n,o,p],r={};q.forEach(function(a){r[a]=!0}),a.exports=f}).call(b,c(9))},function(a,b){function c(){j&&g&&(j=!1,g.length?i=g.concat(i):k=-1,i.length&&d())}function d(){if(!j){var a=setTimeout(c);j=!0;for(var b=i.length;b;){for(g=i,i=[];++k<b;)g&&g[k].run();k=-1,b=i.length}g=null,j=!1,clearTimeout(a)}}function e(a,b){this.fun=a,this.array=b}function f(){}var g,h=a.exports={},i=[],j=!1,k=-1;h.nextTick=function(a){var b=new Array(arguments.length-1);if(arguments.length>1)for(var c=1;c<arguments.length;c++)b[c-1]=arguments[c];i.push(new e(a,b)),1!==i.length||j||setTimeout(d,0)},e.prototype.run=function(){this.fun.apply(null,this.array)},h.title="browser",h.browser=!0,h.env={},h.argv=[],h.version="",h.versions={},h.on=f,h.addListener=f,h.once=f,h.off=f,h.removeListener=f,h.removeAllListeners=f,h.emit=f,h.binding=function(a){throw new Error("process.binding is not supported")},h.cwd=function(){return"/"},h.chdir=function(a){throw new Error("process.chdir is not supported")},h.umask=function(){return 0}},function(a,b){"use strict";function c(a){if(null===a||void 0===a)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(a)}function d(){try{if(!Object.assign)return!1;var a=new String("abc");if(a[5]="de","5"===Object.getOwnPropertyNames(a)[0])return!1;for(var b={},c=0;10>c;c++)b["_"+String.fromCharCode(c)]=c;var d=Object.getOwnPropertyNames(b).map(function(a){return b[a]});if("0123456789"!==d.join(""))return!1;var e={};return"abcdefghijklmnopqrst".split("").forEach(function(a){e[a]=a}),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},e)).join("")}catch(f){return!1}}var e=Object.prototype.hasOwnProperty,f=Object.prototype.propertyIsEnumerable;a.exports=d()?Object.assign:function(a,b){for(var d,g,h=c(a),i=1;i<arguments.length;i++){d=Object(arguments[i]);for(var j in d)e.call(d,j)&&(h[j]=d[j]);if(Object.getOwnPropertySymbols){g=Object.getOwnPropertySymbols(d);for(var k=0;k<g.length;k++)f.call(d,g[k])&&(h[g[k]]=d[g[k]])}}return h}},function(a,b){"use strict";var c=function(a){var b;for(b in a)if(a.hasOwnProperty(b))return b;return null};a.exports=c},function(a,b,c){(function(b){"use strict";function c(a,c,d,e,f,g,h,i){if("production"!==b.env.NODE_ENV&&void 0===c)throw new Error("invariant requires an error message argument");if(!a){var j;if(void 0===c)j=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var k=[d,e,f,g,h,i],l=0;j=new Error(c.replace(/%s/g,function(){return k[l++]})),j.name="Invariant Violation"}throw j.framesToPop=1,j}}a.exports=c}).call(b,c(9))},function(a,b,c){"use strict";var d=(c(4),c(5),c(14)),e=c(15),f=React.createClass({displayName:"ManageUsersForm",getInitialState:function(){return{filter:void 0,filterBy:void 0}},render:function(){var a=this,b=this.props,c=b.userGroups.filter(function(b){return void 0===a.state.filterBy?!0:a.state.filterBy==b.id}).map(function(c){return React.createElement(e,{bulkActions:!0,key:c.id,filter:a.state.filter,users:b.users.filter(function(a){return a.userGroups.includes(c.id)}),title:c.title,userGroup:c})});return React.createElement("div",null,React.createElement(d,{handleFilterBy:function(b){return a.setState({filterBy:isNaN(b)?void 0:b})},handleFilter:function(b){return a.setState({filter:b.length?b:void 0})}}),React.createElement("div",{className:"settings-grid"},c))}});a.exports=f},function(a,b,c){"use strict";var d=c(4),e=c(5),f=React.createClass({displayName:"ManageUserFormHeader",getInitialState:function(){return{quickCreateOpen:!1}},render:function(){var a=this,b=this.props,c=this.state.quickCreateOpen?React.createElement("fieldset",null,React.createElement("legend",null,"Quick Create User"),React.createElement("div",{className:"n field-group"},React.createElement("div",{className:"field-username"},React.createElement("label",{"for":"username",id:"username-label"},"Username"),React.createElement("input",{type:"text",ref:"quickCreateUsername",autoFocus:!0,"aria-describedby":"username-label",name:"username",id:"username",className:"nickname","aria-required":"true","aria-invalid":"false",required:!0})),React.createElement("div",{className:"field-given-name"},React.createElement("label",{"for":"given-name"},"First Name"),React.createElement("input",{type:"text",ref:"quickCreateGivenName",name:"given-name",id:"given-name",className:"given-name"})),React.createElement("div",{className:"field-family-name"},React.createElement("label",{"for":"family-name"},"Last Name"),React.createElement("input",{type:"text",ref:"quickCreateFamilyName",name:"family-name",id:"family-name",className:"family-name"})),React.createElement("div",{className:"field-email"},React.createElement("label",{"for":"email"},"Email"),React.createElement("input",{type:"email",ref:"quickCreateEmail",name:"email",id:"email",className:"email","aria-required":"true","aria-invalid":"false",required:!0}))),React.createElement("div",{className:"field-group user-group-field user-status-field"},React.createElement("div",{className:"field"},React.createElement("input",{checked:!0,type:"checkbox",ref:"quickCreateUserActive",name:"user-active",id:"user-active"}),React.createElement("label",{"for":"user-active"},"Active")),React.createElement("div",{className:"field"},React.createElement("input",{type:"checkbox",ref:"quickCreateUserSudo",name:"user-sudo",id:"user-sudo"}),React.createElement("label",{"for":"user-sudo"},"Sudo"))),React.createElement("div",null,React.createElement("button",{type:"submit"},"Submit")),React.createElement("div",{className:"field-group"},React.createElement("fieldset",{className:"field"},React.createElement("legend",null,"User Groups"),React.createElement("p",null,"Users can belong to any number of User Groups. User are assigned Roles that define their priveldges as a member of the User Group. A user can below to the same User Group with multiple roles."),React.createElement("fieldset",null,React.createElement("legend",null,"Administrator"),React.createElement("label",{"for":"user-group-editor-roles[]"},"Roles"),React.createElement("label",null,React.createElement("input",{type:"checkbox",checked:!0,ref:"userGroupEditorRoles",name:"user-group-editor-roles[]"})," Editor"),React.createElement("label",null,React.createElement("input",{type:"checkbox",ref:"userGroupEditorRoles",name:"user-group-editor-roles[]"})," Super User")),React.createElement("fieldset",null,React.createElement("legend",null,"Editor"),React.createElement("label",{"for":"user-group-editor-roles[]"},"Roles"),React.createElement("label",null,React.createElement("input",{type:"checkbox",name:"user-group-editor-roles[]"})," Editor"),React.createElement("label",null,React.createElement("input",{type:"checkbox",name:"user-group-editor-roles[]"})," Super User")))),React.createElement("footer",null,React.createElement("button",{type:"submit"},"Submit"))):!1,f=this.state.quickCreateOpen?!1:React.createElement("button",{formaction:"./quick-create/user.html",onClick:function(b){return a.setState({quickCreateOpen:!0})}},"Quick Create User");return React.createElement("header",null,React.createElement("h1",null,"Manage Users"),React.createElement("div",{className:"create-setting-module"},React.createElement("form",{action:"./../user-edit/index.html",className:"create-setting-form",onSubmit:function(b){b.preventDefault(),e.dispatch(d.addUser({username:a.refs.quickCreateUsername.value,givenName:a.refs.quickCreateGivenName.value,familyName:a.refs.quickCreateFamilyName.value,email:a.refs.quickCreateEmail.value,active:a.refs.quickCreateUserActive.checked,sudo:a.refs.quickCreateUserSudo.checked,userGroups:[0]})),a.setState({quickCreateOpen:!1})}},React.createElement("div",{className:"top-bar"},f,React.createElement("button",{id:"create-user",formaction:"./../user-edit/index.html"},"Create User")),c)),React.createElement("hr",null),React.createElement("div",null,React.createElement("h3",null,"Search Users"),React.createElement("form",{action:"#",id:"search",className:"search-settings"},React.createElement("label",{"for":"search-users"},React.createElement("span",{"a11y-hidden":!0},"Search: "),React.createElement("input",{name:"search-users",id:"search-users",type:"text",placeholder:"Search for any User. We'll try and find them.",onChange:function(b){try{a.props.handleFilter(b.target.value)}catch(c){}}})),React.createElement("button",{type:"submit"},"Search"),React.createElement("label",{"for":"filter-by"},"Filter by:"),React.createElement("select",{name:"filter-by",id:"filter-by",onChange:function(a){try{b.handleFilterBy(parseInt(a.target.value))}catch(c){console.log(c)}}},React.createElement("option",{checked:!0,value:""},"All"),React.createElement("option",{value:"1"},"Editors"),React.createElement("option",{value:"0"},"Administrators"))),React.createElement("p",null,"Below you will users who have logged in recently per user group.")),React.createElement("hr",null))}});a.exports=f},function(a,b,c){"use strict";function d(a,b,c){return b in a?Object.defineProperty(a,b,{value:c,enumerable:!0,configurable:!0,writable:!0}):a[b]=c,a}var e=c(7),f=c(5),g=c(4),h=(React.createClass({displayName:"SettingTableRowGroup",getInitialState:function(){return{showSettings:!1}},render:function(){var a=this,b=this.props,c=b.user;return React.createElement(k,{user:c,className:"contextual-setting",handleBlur:function(b){return console.log("showSetting",a.state.showSetting)},handleFocus:function(b){return console.log("showSetting",a.state.showSetting)}})}}),function(a){return React.createElement("fieldset",null,React.createElement("legend",null,"Bulk Actions"),React.createElement("button",{disabled:!a.emails.length,formAction:"bulkactions/activate"},"Activate"),React.createElement("button",{disabled:!a.emails.length,formAction:"bulkactions/Suspend"},"Suspend"),React.createElement("button",{disabled:!a.emails.length,formAction:"bulkactions/delete"},"Delete"),React.createElement("button",{disabled:!a.emails.length,formAction:"mailto:"+a.emails.join(",")+"?subject=MODX%20Next",formTarget:"_blank"},"Email"))}),i=React.createClass({displayName:"SettingsTable",getInitialState:function(){return{userFormsToShow:{}}},render:function(){var a,b=this,c=this.props;c.bulkActions&&(a=React.createElement("th",null,React.createElement("input",{type:"checkbox",onChange:function(a){try{b.props.handleBulkAllCheck(a.target.checked)}catch(c){}}})));var f=c.users.map(function(a){return[React.createElement(k,{user:a,className:"contextual-setting",bulkToggle:void 0!==c.bulkToggledUsers[a.id]?c.bulkToggledUsers[a.id]:!1,bulkActions:c.bulkActions,handleFocus:function(c){return b.setState({userFormsToShow:e({},d({},a.id,{$set:!0}))})},handleBulkToggle:function(a,b){try{c.handleBulkToggle(a,b)}catch(d){}}}),b.state.userFormsToShow[a.id]?React.createElement(l,{user:a,userGroup:c.userGroup,colspan:c.bulkActions?"3":"2"}):void 0]});return React.createElement("table",{className:"settings-table"},React.createElement("thead",null,React.createElement("tr",null,a,React.createElement("th",null,"User"),React.createElement("th",null,"Active"))),React.createElement("tbody",null,f))}}),j=React.createClass({displayName:"SettingsGridSection",getInitialState:function(){return{bulkToggledUsers:{}}},render:function(){var a=this,b=this.props,c=b.users,f=void 0!==b.minimumUsersBulkAction?b.minimumUsersBulkAction:3,g=c.map(function(b){return a.state.bulkToggledUsers[b.id]?b.email:void 0}).filter(function(a){return a});void 0!==b.filter&&b.filter.length&&(c=c.filter(function(a){return a.username.indexOf(b.filter)>-1}));var j=c.length>=f?React.createElement(h,{emails:g}):void 0;return console.log(g),React.createElement("section",{id:"core-settings"},React.createElement("header",null,React.createElement("h2",null,b.title)),React.createElement("form",null,j,React.createElement(i,{bulkActions:c.length>=f?b.bulkActions:!1,users:c,bulkToggledUsers:this.state.bulkToggledUsers,userGroup:b.userGroup,handleBulkToggle:function(b,c){a.setState({bulkToggledUsers:e(a.state.bulkToggledUsers,d({},b,{$set:c}))})},handleBulkAllCheck:function(b){console.log("handleBulkAllCheck",b);var d={};b&&c.map(function(a){d[a.id]=!0}),a.setState({bulkToggledUsers:d})}}),j),React.createElement("footer",null,React.createElement("p",null,React.createElement("a",{href:"#"},"View all ",b.title," users"))))}}),k=function(a){var b,c=a.user,d="bulk-"+c.username;return a.bulkActions&&(b=React.createElement("td",null,React.createElement("label",null,React.createElement("input",{type:"checkbox",name:d,checked:a.bulkToggle,onChange:function(b){try{a.handleBulkToggle(c.id,b.target.checked)}catch(d){}}})))),React.createElement("tr",{tabIndex:"0",onFocus:function(b){try{a.handleFocus()}catch(c){}},onBlur:function(b){try{a.handleBlur()}catch(c){}}},b,React.createElement("td",null,c.username),React.createElement("td",null,React.createElement("label",null,React.createElement("span",{"a11y-hidden":!0},"Active: "),React.createElement("input",{checked:c.active,type:"checkbox",onChange:function(a){return f.dispatch(g.updateUser(c.id,{active:a.target.checked}))}}))))},l=function(a){var b=a.user,c=a.userGroup;return React.createElement("tr",a,React.createElement("td",{colSpan:a.colspan},React.createElement("div",null,React.createElement("div",{className:"friendly-labels"},React.createElement("label",null,"Sudo: ",React.createElement("input",{name:"sudo",checked:b.sudo,type:"checkbox",onChange:function(a){f.dispatch(g.updateUser(b.id,{sudo:a.target.checked}))}})),React.createElement("label",null,"Active: ",React.createElement("input",{name:"active",checked:b.active,type:"checkbox",onChange:function(a){f.dispatch(g.updateUser(b.id,{active:a.target.checked}))}}))),React.createElement("p",{className:"subtle balanced oblique"},b.jobTitle),React.createElement("div",null,React.createElement("button",{type:"submit",className:"save"},"Save")),React.createElement("div",null,React.createElement("button",{className:"save"},"Next User")),React.createElement("div",null,React.createElement("button",{type:"submit",formAction:"./quick-edit/user.html"},"Quick Edit"),React.createElement("button",{type:"submit",formAction:"./../user-edit/index.html"},"Edit")),React.createElement("div",null,React.createElement("button",{type:"submit",formAction:"duplicate/user",className:"save"},"Duplicate"),React.createElement("button",{type:"submit",formAction:"delete/user"},"Delete"),React.createElement("button",{type:"submit",formAction:"mailto:"+b.email+"?subject=MODX%20Next",formTarget:"_blank"},"Email")),React.createElement("div",null,React.createElement("button",{type:"submit",className:"save"},"Save")),React.createElement("div",{style:{marginTop:"1em"}},React.createElement("button",{formAction:"removefromgroup/user",onClick:function(a){a.preventDefault(),f.dispatch(g.removeUserFromGroup(b.id,c.id))}},"Remove from Group"))),React.createElement("footer",{className:"subtle oblique balanced"},React.createElement("p",null,b.givenName," ",b.familyName,"’ last login was Jan 23, 2016 4:52pm from Leeuwarden, Nederlands"))))};a.exports=j}]);