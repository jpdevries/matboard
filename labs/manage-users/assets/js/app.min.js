!function(a){function b(d){if(c[d])return c[d].exports;var e=c[d]={exports:{},id:d,loaded:!1};return a[d].call(e.exports,e,e.exports,b),e.loaded=!0,e.exports}var c={};return b.m=a,b.c=c,b.p="",b(0)}([function(a,b,c){"use strict";Array.prototype.includes||(Array.prototype.includes=function(a){var b=Object(this),c=parseInt(b.length,10)||0;if(0===c)return!1;var d,e=parseInt(arguments[1],10)||0;e>=0?d=e:(d=c+e,d<0&&(d=0));for(var f;d<c;){if(f=b[d],a===f||a!==a&&f!==f)return!0;d++}return!1});var d=c(1);document.addEventListener("DOMContentLoaded",function(){new d.ManageUsers;document.querySelector("html").classList.add("react")})},function(a,b,c){"use strict";var d=(c(2),c(3)),e=(c(4),c(8)),f=c(18),g=function(){e.subscribe(function(){console.log(e.getState())});var a=(0,d.connect)(function(a,b){return{quickCreate:a.quickCreate,users:a.users.sort(function(a,b){return a.username>b.username?1:-1}),userGroups:a.userGroups,roles:a.roles,viewProps:a.viewProps}})(f);ReactDOM.render(React.createElement(d.Provider,{store:e},React.createElement(a,null)),document.getElementById("manage-users-form"))};b.ManageUsers=g},function(a,b){a.exports=Redux},function(a,b){a.exports=ReactRedux},function(a,b,c){"use strict";c(5);var d=c(7),e=d.endpoints,f="update_quickcreate",g=function(a){return{type:f,quickCreate:a}};b.UPDATE_QUICKCREATE=f,b.updateQuickCreate=g;var h="addusergroup",i=function(a){return{type:h,userGroup:a}};b.ADD_USER_GROUP=h,b.addUserGroup=i;var j="addusertogroup",k=function(a,b){return{type:j,id:a,group:b}};b.ADD_USER_TO_GROUP=j,b.addUserToGroup=k;var l=function(a,b){return function(c){return fetch(e.API_REMOVE_USER_FROM_GROUP,{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify({user:a,group:b})}).then(function(a){if(a.state<200||a.state>=300){var b=new Error(a.statusText);throw b.response=a,b}return a}).then(function(a){return a.json()}).then(function(d){return c(n(a,b))})["catch"](function(d){return c(p(a,b))})}},m="removeuserfromgroupsuccess",n=function(a,b){return{type:m,id:a,group:b}},o="removeuserfromgrouperror",p=function(a,b){return{type:o,id:a,group:b}};b.REMOVE_USER_FROM_GROUP_SUCCESS=m,b.REMOVE_USER_FROM_GROUP_ERROR=o,b.removeUserFromGroup=l;var q=function(a){return{type:y,user:a,id:a.id}},r="updateuser",s="updateusersuccess",t="updateusererror",u=function(a,b,c){return{type:s,user:b,id:a,data:c}},v=function(a,b){return{type:t,user:b,id:a}},w=function(a,b){return function(c){return fetch(e.API_USER_UPDATE,{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify(b)}).then(function(a){if(a.state<200||a.state>=300){var b=new Error(a.statusText);throw b.response=a,b}return a}).then(function(a){return a.json()}).then(function(d){return c(u(a,b,d))})["catch"](function(d){return c(v(a,b))})}};b.UPDATE_USER=r,b.UPDATE_USER_SUCCESS=s,b.UPDATE_USER_ERROR=t,b.updateUser=w;var x="addusersuccess",y="addusererror",z=function(a,b){return{type:x,user:a,data:b}},A=function(a){return{type:y,user:a}},B=function(a){return function(b){return fetch(e.API_USER_ADD,{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify(a)}).then(function(a){if(a.state<200||a.state>=300){var b=new Error(a.statusText);throw b.response=a,b}return a}).then(function(a){return a.json()}).then(function(c){return b(z(a,c))})["catch"](function(c){return b(A(a))})}};b.ADD_USER_SUCCESS=x,b.ADD_USER_ERROR=y,b.addUser=B;var C="deleteusersuccess",D="deleteusererror",E=function(a){return{type:C,user:a,id:a.id}},q=function(a){return{type:y,user:a,id:a.id}},F=function(a){return function(b){return fetch(e.API_USER_DELETE,{method:"DELETE",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify(a)}).then(function(a){if(a.state<200||a.state>=300){var b=new Error(a.statusText);throw b.response=a,b}return a}).then(function(a){return a.json()}).then(function(c){return b(E(a))})["catch"](function(c){return b(q(a))})}};b.DELETE_USER_SUCCESS=C,b.DELETE_USER_ERROR=D,b.deleteUser=F;var G="deleteuserssuccess",H="deleteuserserror",I=function(a){return{type:G,users:a}},J=function(a){return{type:H,users:a}},K=function(a){return function(b){return fetch(e.API_USERS_DELETE,{method:"DELETE",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify({users:a})}).then(function(a){if(a.state<200||a.state>=300){var b=new Error(a.statusText);throw b.response=a,b}return a}).then(function(a){return a.json()}).then(function(c){return b(I(a))})["catch"](function(c){return b(J(a))})}};b.DELETE_USERS_SUCCESS=G,b.DELETE_USERS_ERROR=H,b.deleteUsers=K;var L="activateuserssuccess",M="activateuserserror",N=function(a){return{type:L,users:a}},O=function(a){return{type:M,users:a}},P=function(a){return function(b){return fetch(e.API_USERS_ACTIVATE,{method:"post",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify({users:a})}).then(function(a){if(a.state<200||a.state>=300){var b=new Error(a.statusText);throw b.response=a,b}return a}).then(function(a){return a.json()}).then(function(c){return b(N(a))})["catch"](function(c){return b(O(a))})}};b.ACTIVATE_USERS_SUCCESS=L,b.ACTIVATE_USERS_ERROR=M,b.activateUsers=P;var Q="deactivateuserssuccess",R="deactivateuserserror",S=function(a){return{type:Q,users:a}},T=function(a){return{type:R,users:a}},U=function(a){return function(b){return fetch("/api/users/deactivate",{method:"post",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify({users:a})}).then(function(a){if(a.state<200||a.state>=300){var b=new Error(a.statusText);throw b.response=a,b}return a}).then(function(a){return a.json()}).then(function(c){return b(S(a))})["catch"](function(c){return b(T(a))})}};b.DEACTIVATE_USERS_SUCCESS=Q,b.DEACTIVATE_USERS_ERROR=R,b.deactivateUsers=U;var V="setroles",W=function(a){return{type:V,roles:a}};b.SET_ROLES=V,b.setRoles=W;var X="setusergroups",Y=function(a){return{type:X,userGroups:a}};b.SET_USER_GROUPS=X,b.setUserGroups=Y;var Z="quickcreateroleadd",$=function(a,b){return{type:Z,group:a,role:b}};b.QUICKCREATE_ROLE_ADD=Z,b.quickCreateRoleAdd=$;var _="quickcreateroleremove",aa=function(a,b){return{type:_,group:a,role:b}};b.QUICKCREATE_ROLE_REMOVE=_,b.quickCreateRoleRemove=aa;var ba="flushquickcreate",ca=function(){var a=arguments.length<=0||void 0===arguments[0]?{}:arguments[0];return{type:ba,quickCreate:a}};b.FLUSH_QUICK_CREATE=ba,b.flushQuickCreate=ca},function(a,b,c){c(6),a.exports=self.fetch.bind(self)},function(a,b){!function(a){"use strict";function b(a){if("string"!=typeof a&&(a=String(a)),/[^a-z0-9\-#$%&'*+.\^_`|~]/i.test(a))throw new TypeError("Invalid character in header field name");return a.toLowerCase()}function c(a){return"string"!=typeof a&&(a=String(a)),a}function d(a){var b={next:function(){var b=a.shift();return{done:void 0===b,value:b}}};return p.iterable&&(b[Symbol.iterator]=function(){return b}),b}function e(a){this.map={},a instanceof e?a.forEach(function(a,b){this.append(b,a)},this):a&&Object.getOwnPropertyNames(a).forEach(function(b){this.append(b,a[b])},this)}function f(a){return a.bodyUsed?Promise.reject(new TypeError("Already read")):void(a.bodyUsed=!0)}function g(a){return new Promise(function(b,c){a.onload=function(){b(a.result)},a.onerror=function(){c(a.error)}})}function h(a){var b=new FileReader;return b.readAsArrayBuffer(a),g(b)}function i(a){var b=new FileReader;return b.readAsText(a),g(b)}function j(){return this.bodyUsed=!1,this._initBody=function(a){if(this._bodyInit=a,"string"==typeof a)this._bodyText=a;else if(p.blob&&Blob.prototype.isPrototypeOf(a))this._bodyBlob=a;else if(p.formData&&FormData.prototype.isPrototypeOf(a))this._bodyFormData=a;else if(p.searchParams&&URLSearchParams.prototype.isPrototypeOf(a))this._bodyText=a.toString();else if(a){if(!p.arrayBuffer||!ArrayBuffer.prototype.isPrototypeOf(a))throw new Error("unsupported BodyInit type")}else this._bodyText="";this.headers.get("content-type")||("string"==typeof a?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):p.searchParams&&URLSearchParams.prototype.isPrototypeOf(a)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},p.blob?(this.blob=function(){var a=f(this);if(a)return a;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))},this.arrayBuffer=function(){return this.blob().then(h)},this.text=function(){var a=f(this);if(a)return a;if(this._bodyBlob)return i(this._bodyBlob);if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)}):this.text=function(){var a=f(this);return a?a:Promise.resolve(this._bodyText)},p.formData&&(this.formData=function(){return this.text().then(m)}),this.json=function(){return this.text().then(JSON.parse)},this}function k(a){var b=a.toUpperCase();return q.indexOf(b)>-1?b:a}function l(a,b){b=b||{};var c=b.body;if(l.prototype.isPrototypeOf(a)){if(a.bodyUsed)throw new TypeError("Already read");this.url=a.url,this.credentials=a.credentials,b.headers||(this.headers=new e(a.headers)),this.method=a.method,this.mode=a.mode,c||(c=a._bodyInit,a.bodyUsed=!0)}else this.url=a;if(this.credentials=b.credentials||this.credentials||"omit",!b.headers&&this.headers||(this.headers=new e(b.headers)),this.method=k(b.method||this.method||"GET"),this.mode=b.mode||this.mode||null,this.referrer=null,("GET"===this.method||"HEAD"===this.method)&&c)throw new TypeError("Body not allowed for GET or HEAD requests");this._initBody(c)}function m(a){var b=new FormData;return a.trim().split("&").forEach(function(a){if(a){var c=a.split("="),d=c.shift().replace(/\+/g," "),e=c.join("=").replace(/\+/g," ");b.append(decodeURIComponent(d),decodeURIComponent(e))}}),b}function n(a){var b=new e,c=(a.getAllResponseHeaders()||"").trim().split("\n");return c.forEach(function(a){var c=a.trim().split(":"),d=c.shift().trim(),e=c.join(":").trim();b.append(d,e)}),b}function o(a,b){b||(b={}),this.type="default",this.status=b.status,this.ok=this.status>=200&&this.status<300,this.statusText=b.statusText,this.headers=b.headers instanceof e?b.headers:new e(b.headers),this.url=b.url||"",this._initBody(a)}if(!a.fetch){var p={searchParams:"URLSearchParams"in a,iterable:"Symbol"in a&&"iterator"in Symbol,blob:"FileReader"in a&&"Blob"in a&&function(){try{return new Blob,!0}catch(a){return!1}}(),formData:"FormData"in a,arrayBuffer:"ArrayBuffer"in a};e.prototype.append=function(a,d){a=b(a),d=c(d);var e=this.map[a];e||(e=[],this.map[a]=e),e.push(d)},e.prototype["delete"]=function(a){delete this.map[b(a)]},e.prototype.get=function(a){var c=this.map[b(a)];return c?c[0]:null},e.prototype.getAll=function(a){return this.map[b(a)]||[]},e.prototype.has=function(a){return this.map.hasOwnProperty(b(a))},e.prototype.set=function(a,d){this.map[b(a)]=[c(d)]},e.prototype.forEach=function(a,b){Object.getOwnPropertyNames(this.map).forEach(function(c){this.map[c].forEach(function(d){a.call(b,d,c,this)},this)},this)},e.prototype.keys=function(){var a=[];return this.forEach(function(b,c){a.push(c)}),d(a)},e.prototype.values=function(){var a=[];return this.forEach(function(b){a.push(b)}),d(a)},e.prototype.entries=function(){var a=[];return this.forEach(function(b,c){a.push([c,b])}),d(a)},p.iterable&&(e.prototype[Symbol.iterator]=e.prototype.entries);var q=["DELETE","GET","HEAD","OPTIONS","POST","PUT"];l.prototype.clone=function(){return new l(this)},j.call(l.prototype),j.call(o.prototype),o.prototype.clone=function(){return new o(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new e(this.headers),url:this.url})},o.error=function(){var a=new o(null,{status:0,statusText:""});return a.type="error",a};var r=[301,302,303,307,308];o.redirect=function(a,b){if(r.indexOf(b)===-1)throw new RangeError("Invalid status code");return new o(null,{status:b,headers:{location:a}})},a.Headers=e,a.Request=l,a.Response=o,a.fetch=function(a,b){return new Promise(function(c,d){function e(){return"responseURL"in g?g.responseURL:/^X-Request-URL:/m.test(g.getAllResponseHeaders())?g.getResponseHeader("X-Request-URL"):void 0}var f;f=l.prototype.isPrototypeOf(a)&&!b?a:new l(a,b);var g=new XMLHttpRequest;g.onload=function(){var a={status:g.status,statusText:g.statusText,headers:n(g),url:e()},b="response"in g?g.response:g.responseText;c(new o(b,a))},g.onerror=function(){d(new TypeError("Network request failed"))},g.ontimeout=function(){d(new TypeError("Network request failed"))},g.open(f.method,f.url,!0),"include"===f.credentials&&(g.withCredentials=!0),"responseType"in g&&p.blob&&(g.responseType="blob"),f.headers.forEach(function(a,b){g.setRequestHeader(b,a)}),g.send("undefined"==typeof f._bodyInit?null:f._bodyInit)})},a.fetch.polyfill=!0}}("undefined"!=typeof self?self:this)},function(a,b){"use strict";var c="/users/activate/",d="/users/deactivate/",e="/user/delete/",f="/user/remove/",g=f+"group/",h="/users/delete/",i="/user/update",j="/user/groups/",k="/api";a.exports={paginateUsers:15,endpoints:{ADD_USER:"/user/add/",UPDATE_USER:"/update/user/",GROUPS:"/groups/",USERS_ACTIVATE:c,API_USERS_ACTIVATE:""+k+c,USERS_DEACTIVATE:d,API_USERS_DEACTIVATE:""+k+d,USER_DELETE:e,API_USER_DELETE:""+k+e,USERS_DELETE:h,API_USERS_DELETE:""+k+h,USER_UPDATE:i,API_USER_UPDATE:""+k+i,API_USER_ADD:k+"/user/add",API_ROLES:k+"/roles",USER_GROUPS:"USER_GROUPS",API_USER_GROUPS:""+k+j,API_USERS:k+"/users",USER_REMOVE:f,USER_REMOVE_FROM_GROUP:g,API_REMOVE_USER_FROM_GROUP:""+k+g}}},function(a,b,c){"use strict";var d=c(2),e=d.createStore,f=d.applyMiddleware,g=c(9)["default"],h=c(10),i=e(h.manageUsersReducer,f(g));a.exports=i},function(a,b){"use strict";function c(a){return function(b){var c=b.dispatch,d=b.getState;return function(b){return function(e){return"function"==typeof e?e(c,d,a):b(e)}}}}b.__esModule=!0;var d=c();d.withExtraArgument=c,b["default"]=d},function(a,b,c){"use strict";function d(a,b,c){return b in a?Object.defineProperty(a,b,{value:c,enumerable:!0,configurable:!0,writable:!0}):a[b]=c,a}var e=c(4),f=c(2).combineReducers,g=c(11),h={pageType:function(){try{return document.querySelector("body").getAttribute("data-page-type")||"summary"}catch(a){}return"summary"}(),showFilterBy:function(){try{return"false"!=document.querySelector("body").getAttribute("data-show-filterby")}catch(a){}return!0}()},i=function(){var a=[];try{for(var b=document.querySelectorAll("section.user-group"),c=0;c<b.length;c++){var d=b[c],e=parseInt(d.getAttribute("data-user-group-id")),f=d.getAttribute("data-slackchannel"),g=d.querySelector(".name").innerHTML;a.push({id:e,title:g,name:g,slackChannel:f})}}catch(h){}return a}(),j=function(){var a=[];try{for(var b=document.querySelectorAll("tr.user-row"),c=[],d=0;d<b.length;d++){var e=b[d],f=e.getAttribute("data-user-groups").split(",").map(function(a){return parseInt(a)}),g=e.querySelector(".username").innerHTML,h=e.getAttribute("data-email"),i=e.getAttribute("data-slack")||void 0,j=e.getAttribute("data-user-id"),k=e.nextElementSibling,l=k.querySelector(".givenName").innerHTML,m=k.querySelector(".familyName").innerHTML,n=k.querySelector("input.sudo").checked,o=k.querySelector("input.active").checked,p=k.querySelector(".jobTitle").innerHTML,q={};Array.prototype.map.call(e.nextElementSibling.querySelectorAll('input[name="grouproles[]"]'),function(a){var b=a.getAttribute("data-group"),c=a.getAttribute("data-role");q[b]||(q[b]=[]),q[b].push(c)}),c[j]||a.push({id:j,username:g,slack:i,givenName:l,familyName:m,email:h,active:o,sudo:n,jobTitle:p,userGroups:f,groupRoles:q,roles:q}),c[j]=!0}}catch(r){}return a}(),k=function(){try{return Array.prototype.map.call(document.querySelector(".create-setting-form .field-group fieldset fieldset").querySelectorAll("label"),function(a){return{name:a.querySelector("span").innerHTML,id:a.querySelector("input").getAttribute("data-role-id"),key:a.querySelector("input").getAttribute("data-role-id")}})}catch(a){return[]}}(),l={username:"",givenName:"",familyName:"",email:"",active:!0,sudo:!1,open:!1,updating:!1,id:void 0,roles:function(){var a={};return i.map(function(b){return a[b.id.toString()]=[]}),a}()},m={users:j,userGroups:i,roles:k,quickCreate:l},n=function(a,b){a=a||m.users;var c=0;switch(a.map(function(a,d){a.id==b.id&&(c=d)}),b.type){case e.UPDATE_USER_SUCCESS:var f=g(a,d({},c,{$apply:function(a){return g(a,{$merge:b.user})}}));return f;case e.ADD_USER_TO_GROUP:return g(a,d({},c,{$apply:function(a){return g(a,{$merge:{userGroups:g(a.userGroups,{$push:[b.group]}),roles:{$apply:function(a){try{a[b.group]||g(a,{$merge:d({},b.group,[])})}catch(c){}return a}}}})}}));case e.REMOVE_USER_FROM_GROUP_SUCCESS:return g(a,d({},c,{$apply:function(e){return g(e,{$merge:{userGroups:a[c].userGroups.map(function(a){return a!==b.group?a:void 0}).filter(function(a){return void 0!==a}),roles:Object.assign({},a[c].roles,d({},b.group,[]))}})}}));case e.ADD_USER_SUCCESS:if(void 0===b.user.id){var h=0;a.map(function(a,b){h=Math.max(a.id,h)}),b.user.id=h+1}return g(a,{$push:[b.user]});case e.DELETE_USER_SUCCESS:var f=g(a,{$splice:[[c,1]]});return f;case e.DELETE_USER_ERROR:return a;case e.DELETE_USERS_SUCCESS:return g(a,{$set:a.map(function(a,c){return b.users.includes(a.id.toString())?void 0:a}).filter(function(a){return void 0!==a})});case e.ACTIVATE_USERS_SUCCESS:return g(a,{$set:a.map(function(a,c){return b.users.includes(a.id.toString())?g(a,{$merge:{active:!0}}):a})});case e.DEACTIVATE_USERS_SUCCESS:return g(a,{$set:a.map(function(a,c){return b.users.includes(a.id.toString())?g(a,{$merge:{active:!1}}):a})});default:return a}},o=function(a,b){switch(a=a||m.quickCreate,b.type){case e.UPDATE_QUICKCREATE:return g(a,{$merge:b.quickCreate});case e.QUICKCREATE_ROLE_ADD:if(a.roles[b.group]||(a.roles[b.group]=[]),a.roles[b.group].includes(b.role))break;return g(a,{roles:{$apply:function(a){return g(a,d({},b.group,{$apply:function(a){return g(a,{$push:[b.role]})}}))}}});case e.QUICKCREATE_ROLE_REMOVE:return g(a,{roles:{$apply:function(a){return g(a,d({},b.group,{$apply:function(a){return a.filter(function(a){return a.toString()!==b.role.toString()})}}))}}});case e.FLUSH_QUICK_CREATE:return g(a,{$set:g(l,{$merge:b.quickCreate})})}return a},p=function(a,b){switch(a=a||m.userGroups,b.type){case e.ADD_USER_GROUP:if(void 0===b.userGroup.id){var c=0;a.map(function(a,b){c=Math.max(a.id,c)}),b.userGroup.id=c+1}return g(a,{$push:[b.userGroup]});case e.SET_USER_GROUPS:return g(a,{$set:b.userGroups})}return a},q=function(a,b){switch(a=a||m.roles,b.type){case e.SET_ROLES:return g(a,{$set:b.roles})}return a},r=function(a,b){return a=a||h},s=f({quickCreate:o,users:n,userGroups:p,roles:q,viewProps:r});b.manageUsersReducer=s},function(a,b,c){a.exports=c(12)},function(a,b,c){(function(b){"use strict";function d(a){return Array.isArray(a)?a.concat():a&&"object"==typeof a?h(new a.constructor,a):a}function e(a,c,d){Array.isArray(a)?void 0:"production"!==b.env.NODE_ENV?j(!1,"update(): expected target of %s to be an array; got %s.",d,a):g("1",d,a);var e=c[d];Array.isArray(e)?void 0:"production"!==b.env.NODE_ENV?j(!1,"update(): expected spec of %s to be an array; got %s. Did you forget to wrap your parameter in an array?",d,e):g("2",d,e)}function f(a,c){if("object"!=typeof c?"production"!==b.env.NODE_ENV?j(!1,"update(): You provided a key path to update() that did not contain one of %s. Did you forget to include {%s: ...}?",r.join(", "),o):g("3",r.join(", "),o):void 0,k.call(c,o))return 1!==Object.keys(c).length?"production"!==b.env.NODE_ENV?j(!1,"Cannot have more than one key in an object with %s",o):g("4",o):void 0,c[o];var i=d(a);if(k.call(c,p)){var t=c[p];t&&"object"==typeof t?void 0:"production"!==b.env.NODE_ENV?j(!1,"update(): %s expects a spec of type 'object'; got %s",p,t):g("5",p,t),i&&"object"==typeof i?void 0:"production"!==b.env.NODE_ENV?j(!1,"update(): %s expects a target of type 'object'; got %s",p,i):g("6",p,i),h(i,c[p])}k.call(c,l)&&(e(a,c,l),c[l].forEach(function(a){i.push(a)})),k.call(c,m)&&(e(a,c,m),c[m].forEach(function(a){i.unshift(a)})),k.call(c,n)&&(Array.isArray(a)?void 0:"production"!==b.env.NODE_ENV?j(!1,"Expected %s target to be an array; got %s",n,a):g("7",n,a),Array.isArray(c[n])?void 0:"production"!==b.env.NODE_ENV?j(!1,"update(): expected spec of %s to be an array of arrays; got %s. Did you forget to wrap your parameters in an array?",n,c[n]):g("8",n,c[n]),c[n].forEach(function(a){Array.isArray(a)?void 0:"production"!==b.env.NODE_ENV?j(!1,"update(): expected spec of %s to be an array of arrays; got %s. Did you forget to wrap your parameters in an array?",n,c[n]):g("8",n,c[n]),i.splice.apply(i,a)})),k.call(c,q)&&("function"!=typeof c[q]?"production"!==b.env.NODE_ENV?j(!1,"update(): expected spec of %s to be a function; got %s.",q,c[q]):g("9",q,c[q]):void 0,i=c[q](i));for(var u in c)s.hasOwnProperty(u)&&s[u]||(i[u]=f(a[u],c[u]));return i}var g=c(14),h=c(15),i=c(16),j=c(17),k={}.hasOwnProperty,l=i({$push:null}),m=i({$unshift:null}),n=i({$splice:null}),o=i({$set:null}),p=i({$merge:null}),q=i({$apply:null}),r=[l,m,n,o,p,q],s={};r.forEach(function(a){s[a]=!0}),a.exports=f}).call(b,c(13))},function(a,b){function c(){throw new Error("setTimeout has not been defined")}function d(){throw new Error("clearTimeout has not been defined")}function e(a){if(k===setTimeout)return setTimeout(a,0);if((k===c||!k)&&setTimeout)return k=setTimeout,setTimeout(a,0);try{return k(a,0)}catch(b){try{return k.call(null,a,0)}catch(b){return k.call(this,a,0)}}}function f(a){if(l===clearTimeout)return clearTimeout(a);if((l===d||!l)&&clearTimeout)return l=clearTimeout,clearTimeout(a);try{return l(a)}catch(b){try{return l.call(null,a)}catch(b){return l.call(this,a)}}}function g(){p&&n&&(p=!1,n.length?o=n.concat(o):q=-1,o.length&&h())}function h(){if(!p){var a=e(g);p=!0;for(var b=o.length;b;){for(n=o,o=[];++q<b;)n&&n[q].run();q=-1,b=o.length}n=null,p=!1,f(a)}}function i(a,b){this.fun=a,this.array=b}function j(){}var k,l,m=a.exports={};!function(){try{k="function"==typeof setTimeout?setTimeout:c}catch(a){k=c}try{l="function"==typeof clearTimeout?clearTimeout:d}catch(a){l=d}}();var n,o=[],p=!1,q=-1;m.nextTick=function(a){var b=new Array(arguments.length-1);if(arguments.length>1)for(var c=1;c<arguments.length;c++)b[c-1]=arguments[c];o.push(new i(a,b)),1!==o.length||p||e(h)},i.prototype.run=function(){this.fun.apply(null,this.array)},m.title="browser",m.browser=!0,m.env={},m.argv=[],m.version="",m.versions={},m.on=j,m.addListener=j,m.once=j,m.off=j,m.removeListener=j,m.removeAllListeners=j,m.emit=j,m.binding=function(a){throw new Error("process.binding is not supported")},m.cwd=function(){return"/"},m.chdir=function(a){throw new Error("process.chdir is not supported")},m.umask=function(){return 0}},function(a,b){"use strict";function c(a){for(var b=arguments.length-1,c="Minified React error #"+a+"; visit http://facebook.github.io/react/docs/error-decoder.html?invariant="+a,d=0;d<b;d++)c+="&args[]="+encodeURIComponent(arguments[d+1]);c+=" for the full message or use the non-minified dev environment for full errors and additional helpful warnings.";var e=new Error(c);throw e.name="Invariant Violation",e.framesToPop=1,e}a.exports=c},function(a,b){"use strict";function c(a){if(null===a||void 0===a)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(a)}function d(){try{if(!Object.assign)return!1;var a=new String("abc");if(a[5]="de","5"===Object.getOwnPropertyNames(a)[0])return!1;for(var b={},c=0;c<10;c++)b["_"+String.fromCharCode(c)]=c;var d=Object.getOwnPropertyNames(b).map(function(a){return b[a]});if("0123456789"!==d.join(""))return!1;var e={};return"abcdefghijklmnopqrst".split("").forEach(function(a){e[a]=a}),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},e)).join("")}catch(f){return!1}}var e=Object.prototype.hasOwnProperty,f=Object.prototype.propertyIsEnumerable;a.exports=d()?Object.assign:function(a,b){for(var d,g,h=c(a),i=1;i<arguments.length;i++){d=Object(arguments[i]);for(var j in d)e.call(d,j)&&(h[j]=d[j]);if(Object.getOwnPropertySymbols){g=Object.getOwnPropertySymbols(d);for(var k=0;k<g.length;k++)f.call(d,g[k])&&(h[g[k]]=d[g[k]])}}return h}},function(a,b){"use strict";var c=function(a){var b;for(b in a)if(a.hasOwnProperty(b))return b;return null};a.exports=c},function(a,b,c){(function(b){"use strict";function c(a,c,d,e,f,g,h,i){if("production"!==b.env.NODE_ENV&&void 0===c)throw new Error("invariant requires an error message argument");if(!a){var j;if(void 0===c)j=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var k=[d,e,f,g,h,i],l=0;j=new Error(c.replace(/%s/g,function(){return k[l++]})),j.name="Invariant Violation"}throw j.framesToPop=1,j}}a.exports=c}).call(b,c(13))},function(a,b,c){"use strict";var d=(c(4),c(8),c(19)),e=c(24),f=React.createClass({displayName:"ManageUsersForm",getInitialState:function(){return{filter:void 0,filterBy:void 0}},handleFilterBy:function(a){this.setState({filterBy:isNaN(a)?void 0:a})},linkUsers:function(a){for(var b=[],c=0;c<a.length;c++)b.push(Object.assign({},a[c],{nextUser:c<a.length-1&&a[c+1]?a[c+1]:void 0}));return b},render:function(){var a=this,b=this.props,c=void 0!==this.state.filterBy,f=b.userGroups.filter(function(b){return void 0===a.state.filterBy||a.state.filterBy==b.id}).map(function(d){return React.createElement(e,{bulkActions:!0,viewProps:b.viewProps,userGroup:d,key:d.id,expanded:c,filter:a.state.filter,handleFilterBy:a.handleFilterBy,users:a.linkUsers(b.users.filter(function(a){return a.userGroups.includes(d.id)})),title:d.title})});return React.createElement("div",null,React.createElement("div",{id:"manage-user-form__header"},React.createElement(d,{filterBy:this.state.filterBy,viewProps:b.viewProps,roles:b.roles,userGroups:b.userGroups,quickCreate:b.quickCreate,handleFilterBy:this.handleFilterBy,handleFilter:function(b){return a.setState({filter:b.length?b:void 0})}})),React.createElement("div",{id:"fold",className:"settings-grid"},f))}});a.exports=f},function(a,b,c){"use strict";function d(a){if(Array.isArray(a)){for(var b=0,c=Array(a.length);b<a.length;b++)c[b]=a[b];return c}return Array.from(a)}var e=Object.assign||function(a){for(var b=1;b<arguments.length;b++){var c=arguments[b];for(var d in c)Object.prototype.hasOwnProperty.call(c,d)&&(a[d]=c[d])}return a},f=c(4),g=c(8),h=c(20),i=c(22),j=c(11),k=c(7),l=k.endpoints,m=React.createClass({displayName:"CreateSettingsForm",mixins:[h],getInitialState:function(){return{quickCreateOpen:!1,formMethod:""}},componentWillMount:function(){var a=this;g.subscribe(function(){a.setState({quickCreateOpen:g.getState().quickCreate.open})})},handleDeleteUser:function(a){this.setState({formMethod:"delete"})},render:function(){var a=this,b=this.props,c=!this.state.quickCreateOpen&&React.createElement("a",{href:l.ADD_USER,className:"button",onClick:function(a){a.preventDefault(),g.dispatch(f.updateQuickCreate({open:!0}))}},"Quick ",b.quickCreate.updating?"Update":"Create"," User"),h=this.state.quickCreateOpen?React.createElement("button",null,"More Options"):React.createElement("a",{className:"button",href:l.ADD_USER},"Create User"),k=!!this.state.quickCreateOpen&&React.createElement(i,e({},b,{handleDeleteUser:this.handleDeleteUser}));return React.createElement("form",{ref:"createSettingForm",action:b.quickCreate.updating?l.UPDATE_USER+b.quickCreate.id:l.ADD_USER,method:"post",className:"create-setting-form",onChange:this.updateFormData,onSubmit:function(c){function e(a){a.setState({quickCreateOpen:!1}),g.dispatch(f.flushQuickCreate())}switch(c.preventDefault(),a.state.formMethod){case"delete":return void g.dispatch(f.deleteUser(j({},{$merge:{user_id:b.quickCreate.id,id:b.quickCreate.id}}))).then(function(){return e(a)})}var h={},i=[];try{var k=new FormData(a.refs.createSettingForm),l=!0,m=!1,n=void 0;try{for(var o,p=k.entries()[Symbol.iterator]();!(l=(o=p.next()).done);l=!0){var q=o.value;h[q[0]]=q[1],q[0].indexOf("-role")>-1&&i.push(parseInt(q[1].split("|")[0]))}}catch(r){m=!0,n=r}finally{try{!l&&p["return"]&&p["return"]()}finally{if(m)throw n}}}catch(s){for(var t in a.formData)h[t]=a.formData[t],t.indexOf("-role")>-1&&a.formData[t].map(function(a,b){i.push(parseInt(a.split("|")[0]))})}for(var u in b.quickCreate.roles)i.push(parseInt(u));i=[].concat(d(new Set(i))),i=i.map(function(a){return parseInt(a)}),i=i.filter(function(a){return!(void 0===b.quickCreate.roles[a]||!b.quickCreate.roles[a].length)});var v={id:b.quickCreate.id,username:b.quickCreate.username,givenName:b.quickCreate.givenName,familyName:b.quickCreate.familyName,email:b.quickCreate.email,active:b.quickCreate.active,sudo:b.quickCreate.sudo,roles:b.quickCreate.roles,userGroups:i};(b.quickCreate.updating?g.dispatch(f.updateUser(b.quickCreate.id,v)):g.dispatch(f.addUser(v))).then(function(){return e(a)})}},React.createElement("div",{className:"top-bar"},c,h),k)}}),n=React.createClass({displayName:"ManageUserFormHeader",getInitialState:function(){return{}},render:function(){var a=this,b=this.props,c=b.userGroups.map(function(a,b){return React.createElement("option",{key:a.id,value:a.id},a.title)}),d=!!b.viewProps.showFilterBy&&React.createElement("label",{htmlFor:"filter-by","aria-hidden":!0},"Filter by: "),e=!!b.viewProps.showFilterBy&&React.createElement("select",{"aria-label":"Filter Users by User Group",name:"filter-by",id:"filter-by",value:b.filterBy,onChange:function(a){try{b.handleFilterBy(parseInt(a.target.value))}catch(c){}}},React.createElement("option",{checked:!0,value:""},"All"),c);return React.createElement("header",null,React.createElement("h1",null,"Manage Users"),React.createElement("div",{className:"create-user-module"},React.createElement(m,b)),React.createElement("hr",{"aria-hidden":!0}),React.createElement("div",{role:"search"},React.createElement("h3",{id:"search"},"Search Users"),React.createElement("p",null,React.createElement("label",{htmlFor:"search-users"},"Search for any User.")," We’ll try and find them."),React.createElement("form",{action:"#",id:"search",className:"search-settings"},React.createElement("div",{className:"search-users-wrapper"},React.createElement("input",{name:"search-users",id:"search-users",type:"text",placeholder:"carmensandiego","aria-labeledby":"search",onChange:function(b){try{a.props.handleFilter(b.target.value)}catch(c){}}})),React.createElement("div",null,React.createElement("button",{type:"submit"},"Search")),d,e)),React.createElement("p",null,"Below you will find users who have logged in recently per user group."),React.createElement("hr",{"aria-hidden":!0}))}});a.exports=n},function(a,b,c){a.exports=c(21)},function(a,b){var c,d,e,f;d=function(a){return"checkbox"===a.getAttribute("type")},e=function(a){return null!=a.getAttribute("value")},f=function(a,b){var c;return c=a.indexOf(b),c!==-1?a.splice(c,1):a.push(b),a},c=function(a,b){return d(a)?e(a)?(null==b&&(b=[]),f(b,a.value)):a.checked:a.value},a.exports={componentWillMount:function(){return null!=this.getInitialFormData?this.formData=this.getInitialFormData():this.formData={}},updateFormData:function(a){var b,d,e;if(e=a.target,b=e.getAttribute("name"),null!=b&&(d=c(e,this.formData[b]),this.setFormData(b,d),null!=this.formDataDidChange))return this.formDataDidChange()},setFormData:function(a,b){return this.formData[a]=b},clearFormData:function(){return this.formData={}},resetFormData:function(a){return this.clearFormData(),Object.keys(a).forEach(function(b){return function(c){return b.formData[c]=a[c]}}(this))}}},function(a,b,c){"use strict";function d(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function e(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}function f(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);
a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}Object.defineProperty(b,"__esModule",{value:!0});var g=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}();if(!h)var h=c(23);var i=c(4),j=c(8),k=c(7),l=k.endpoints,m=function(a){function b(){return d(this,b),e(this,(b.__proto__||Object.getPrototypeOf(b)).apply(this,arguments))}return f(b,a),g(b,[{key:"render",value:function(){var a=this.props,b=a.userGroups,c=a.roles,d=[],e=a.quickCreate.roles;try{b.map(function(a,b){var f=[];c.map(function(b,c){var d=function(){try{return e[a.id].includes(b.id)}catch(c){return!1}}();f.push(h.createElement("label",{key:c,htmlFor:"user-group-"+a.id+"-roles[]"},h.createElement("input",{type:"checkbox",onChange:function(c){c.target.checked?j.dispatch(i.quickCreateRoleAdd(a.id,b.id)):j.dispatch(i.quickCreateRoleRemove(a.id,b.id))},checked:d,name:"user-group-"+a.id+"-roles[]",value:a.id+"|"+b.id})," ",b.name))}),d.push(h.createElement("fieldset",{key:b},h.createElement("legend",null,a.title||a.name),f))})}catch(f){}var g=!!a.quickCreate.updating&&h.createElement("div",null,h.createElement("div",null,h.createElement("button",{type:"submit",formaction:"/duplicate/user",formMethod:"put"},"Duplicate User"),h.createElement("button",{type:"submit",onClick:this.props.handleDeleteUser,className:"dangerous",formAction:l.USER_DELETE,formMethod:"post"},"Delete User")),h.createElement("div",null,h.createElement("a",{className:"button",href:"mailto:"+a.quickCreate.email+"?subject=MODX%20Next"},"Email User")));return h.createElement("div",null,h.createElement("fieldset",null,h.createElement("legend",null,"Quick ",a.quickCreate.updating?"Update":"Create"," User"),h.createElement("input",{type:"hidden",name:"id",value:a.quickCreate.id}),h.createElement("div",{className:"n quick-create-fields field-group"},h.createElement("div",{className:"field-username"},h.createElement("label",{htmlFor:"username",id:"username-label"},"Username"),h.createElement("input",{type:"text",autoComplete:"off",value:a.quickCreate.username,disabled:a.quickCreate.updating,onChange:function(a){j.dispatch(i.updateQuickCreate({username:a.target.value}))},ref:"quickCreateUsername",autoFocus:!a.quickCreate.updating,"aria-describedby":"username-label",name:"username",id:"username",className:"nickname","aria-required":"true","aria-invalid":"false",required:!0})),h.createElement("div",{className:"field-given-name"},h.createElement("label",{htmlFor:"given-name"},"First Name"),h.createElement("input",{type:"text",value:a.quickCreate.givenName,onChange:function(a){j.dispatch(i.updateQuickCreate({givenName:a.target.value}))},ref:"quickCreateGivenName",name:"given-name",id:"given-name",className:"given-name"})),h.createElement("div",{className:"field-family-name"},h.createElement("label",{htmlFor:"family-name"},"Last Name"),h.createElement("input",{type:"text",value:a.quickCreate.familyName,onChange:function(a){j.dispatch(i.updateQuickCreate({familyName:a.target.value}))},ref:"quickCreateFamilyName",name:"family-name",id:"family-name",className:"family-name"})),h.createElement("div",{className:"field-email"},h.createElement("label",{htmlFor:"email"},"Email"),h.createElement("input",{type:"email",value:a.quickCreate.email,autoFocus:a.quickCreate.updating,onChange:function(a){j.dispatch(i.updateQuickCreate({email:a.target.value}))},ref:"quickCreateEmail",name:"email",id:"email",className:"email","aria-required":"true","aria-invalid":"false",required:!0}))),h.createElement("div",{className:"field-group user-group-field user-status-field"},h.createElement("div",{className:"field"},h.createElement("input",{type:"checkbox",checked:a.quickCreate.active,onChange:function(a){j.dispatch(i.updateQuickCreate({active:a.target.checked}))},ref:"quickCreateUserActive",name:"user-active",id:"user-active"}),h.createElement("label",{htmlFor:"user-active"}," Active")),h.createElement("div",{className:"field"},h.createElement("input",{type:"checkbox",checked:a.quickCreate.sudo,onChange:function(a){j.dispatch(i.updateQuickCreate({sudo:a.target.checked}))},ref:"quickCreateUserSudo",name:"user-sudo",id:"user-sudo"}),h.createElement("label",{htmlFor:"user-sudo"}," Sudo"))),h.createElement("div",{className:"button-bar"},h.createElement("div",{className:"balanced"},h.createElement("button",{className:"comfortably",type:"submit"},a.quickCreate.updating?"Update":"Create"," User"))),h.createElement("div",{className:"field-group"},h.createElement("fieldset",{className:"field"},h.createElement("legend",null,"User Permissions"),h.createElement("p",null,"Users can belong to any number of User Groups. User are assigned Roles that define their priveldges as a member of the User Group. A user can belong to the same User Group with multiple roles."),h.createElement("div",{className:"user-group-roles"},d)))),h.createElement("footer",{className:"balanced"},h.createElement("div",null,h.createElement("button",{className:"comfortably",type:"submit"},a.quickCreate.updating?"Update":"Create"," User")),g))}}]),b}(h.Component);b["default"]=m,a.exports=m},function(a,b){a.exports=React},function(a,b,c){"use strict";function d(a,b,c){return b in a?Object.defineProperty(a,b,{value:c,enumerable:!0,configurable:!0,writable:!0}):a[b]=c,a}function e(a){return a.replace(/[!\"#$%&'\(\)\*\+,\.\/:;<=>\?\@\[\\\]\^`\{\|\}~]/g,"").trim().replace(/ /g,"").toLowerCase()}var f=Object.assign||function(a){for(var b=1;b<arguments.length;b++){var c=arguments[b];for(var d in c)Object.prototype.hasOwnProperty.call(c,d)&&(a[d]=c[d])}return a},g=c(11),h=c(8),i=c(4),j=c(20),k=c(7),l=k.endpoints,m=(React.createClass({displayName:"SettingTableRowGroup",getInitialState:function(){return{showSettings:!1}},render:function(){var a=this.props,b=a.user;return React.createElement(p,{user:b,className:"contextual-setting"})}}),React.createClass({displayName:"SettingsGridSectionBulkActionsFieldset",mixins:[j],getInitalState:function(){return{formAction:"",formMethod:"push"}},handleBulkButtonClick:function(a){this.setState({formAction:a.target.getAttribute("formaction"),formMethod:a.target.getAttribute("formmethod")})},render:function(){var a=this,b=this.props,c=b.bulkToggledUsers,d=[],e=[];return Object.keys(c).forEach(function(a){c[a]&&(e.push(a.toString()),d.push(React.createElement("input",{key:a,type:"hidden",name:"bulk-toggle-users[]",value:a})))}),React.createElement("form",{action:"/bulk/actions",method:"post",onChange:this.updateFormData,onSubmit:function(b){try{switch(a.state.formAction){case l.API_USERS_ACTIVATE:b.preventDefault(),h.dispatch(i.activateUsers(e));break;case l.API_USERS_DEACTIVATE:b.preventDefault(),h.dispatch(i.deactivateUsers(e));break;case l.API_USERS_DELETE:b.preventDefault(),h.dispatch(i.deleteUsers(e))}}catch(c){}}},d,React.createElement("fieldset",null,React.createElement("legend",{"aria-label":"Bulk Actions are conditionally enabled options such as activate, suspend, delete or email that can be executed on selected users."},"Bulk Actions"),React.createElement("button",{type:"submit","aria-hidden":!b.emails.length,disabled:!b.emails.length,className:"go",formAction:l.API_USERS_ACTIVATE,formMethod:"post",onClick:this.handleBulkButtonClick},"Activate"),React.createElement("button",{type:"submit","aria-hidden":!b.emails.length,disabled:!b.emails.length,className:"danger",formAction:l.API_USERS_DEACTIVATE,formMethod:"post",onClick:this.handleBulkButtonClick},"Suspend"),React.createElement("button",{type:"submit","aria-hidden":!b.emails.length,disabled:!b.emails.length,className:"danger",formAction:l.API_USERS_DELETE,formMethod:"delete",onClick:this.handleBulkButtonClick},"Delete"),React.createElement("a",{className:"button","aria-hidden":!b.emails.length,disabled:!b.emails.length,tabIndex:b.emails.length?"0":"-1",href:b.emails.length?"mailto:"+b.emails.join(",")+"?subject=MODX%20Next&body=":void 0},"Email"),React.createElement("a",{className:"button","aria-hidden":!b.emails.length,disabled:!b.emails.length,tabIndex:b.emails.length?"0":"-1",href:b.emails.length?"https://"+b.slackChannel+".slack.com/messages/@"+b.slackHandles.join(","):void 0,target:"_blank"},"Slack DM")))}})),n=React.createClass({displayName:"SettingsTable",getInitialState:function(){return{userFormsToShow:{}}},handleQuickEdit:function(a,b){b.preventDefault(),b.stopPropagation()},render:function(){var a,b=this,c=this.props;c.bulkActions&&(a=React.createElement("th",null,React.createElement("input",{type:"checkbox",id:"bulk-select-all-"+c.userGroup.id,onChange:function(a){try{b.props.handleBulkAllCheck(a.target.checked)}catch(c){}}})," ",React.createElement("label",{htmlFor:"bulk-select-all-"+c.userGroup.id,className:"accessibly-hidden"},"Select all ",c.userGroup.title," Members")));var e=c.users.map(function(a){return[React.createElement(p,{user:a,pressed:b.state.userFormsToShow[a.id],userGroup:c.userGroup,bulkToggle:void 0!==c.bulkToggledUsers[a.id]&&c.bulkToggledUsers[a.id],bulkActions:c.bulkActions,handleFocus:function(c){return b.setState({userFormsToShow:g({},d({},a.id,{$set:!0}))})},handleBulkToggle:function(a,b){try{c.handleBulkToggle(a,b)}catch(d){}}}),!!b.state.userFormsToShow[a.id]&&React.createElement(q,{handleNextBtnClicked:function(c){b.setState({userFormsToShow:g({},d({},a.id,{$set:!1}))})},slackChannel:c.userGroup.slackChannel,handleQuickEdit:b.handleQuickEdit.bind(null,a),className:"contextual-setting",user:a,userGroup:c.userGroup,colspan:c.bulkActions?"3":"2"})]});return React.createElement("table",{className:"settings-table"},React.createElement("thead",null,React.createElement("tr",null,a,React.createElement("th",{className:"username","aria-label":"User Column"},"User"),React.createElement("th",{"aria-label":"Active Column"},"Active"))),React.createElement("tbody",null,e))}}),o=React.createClass({displayName:"SettingsGridSection",getInitialState:function(){return{bulkToggledUsers:{}}},render:function(){var a=this,b=this.props,c=b.users,f=void 0!==b.minimumUsersBulkAction?b.minimumUsersBulkAction:3,j=c.map(function(b){return a.state.bulkToggledUsers[b.id]?b.email:void 0}).filter(function(a){return a}),o=c.map(function(b){return a.state.bulkToggledUsers[b.id]?b.slack:void 0}).filter(function(a){return a});void 0!==b.filter&&b.filter.length&&(c=c.filter(function(a){return a.username.indexOf(b.filter)>-1}));var p=k.paginateUsers,q=c.length>=f&&React.createElement(m,{bulkToggledUsers:this.state.bulkToggledUsers,emails:j,slackChannel:b.userGroup.slackChannel,slackHandles:o}),r=!this.props.expanded&&"detail"!=this.props.viewProps.pageType&&(c.length>p&&React.createElement("footer",null,React.createElement("p",null,React.createElement("a",{onClick:function(c){c.preventDefault(),a.props.handleFilterBy(b.userGroup.id)},href:""+l.GROUPS+b.userGroup.id+"#fold"},"View all ",b.title," users")))),s=this.props.expanded||"detail"==this.props.viewProps.pageType?c:c.slice(0,p);return!!s.length&&React.createElement("section",{id:"user-group-"+b.userGroup.id},React.createElement("div",null,React.createElement("header",null,React.createElement("h2",{id:e(b.title),"aria-label":b.title},React.createElement("a",{"aria-hidden":!0,className:"subtle",href:"#"+e(b.title),"data-view-all-href":""+l.GROUPS+b.userGroup.id+"#fold"},b.title))),React.createElement("div",{className:"balanced"},React.createElement("a",{className:"button",href:l.ADD_USER+"?group="+b.userGroup.id+"#fold",style:{marginBottom:"2em"},onClick:function(a){a.preventDefault(),h.dispatch(i.flushQuickCreate({active:!0,open:!0,updating:!1,roles:d({},b.userGroup.id,[h.getState().roles[0].id])})),window.scrollTo(0,0)}},"Create "+b.title+" User")),React.createElement("div",null,q,React.createElement(n,{slackChannel:b.userGroup.slackChannel,bulkActions:s.length>=f&&b.bulkActions,users:s,bulkToggledUsers:this.state.bulkToggledUsers,userGroup:b.userGroup,handleBulkToggle:function(b,c){a.setState({bulkToggledUsers:g(a.state.bulkToggledUsers,d({},b,{$set:c}))})},handleBulkAllCheck:function(b){var c={};b&&s.map(function(a){c[a.id]=!0}),a.setState({bulkToggledUsers:c})}}),q),r))}}),p=function(a){var b,c=a.user,d=a.userGroup,f="bulk-"+d.id+"-"+c.username,j="active-"+d.id+"-"+c.username,k="Active status for user "+c.username;return a.bulkActions&&(b=React.createElement("td",null,React.createElement("label",{hidden:!0,className:"accessibly-hidden",htmlFor:f},"Select ",c.username),React.createElement("input",{"aria-label":"Select "+c.username,type:"checkbox",id:f,name:f,checked:a.bulkToggle,onChange:function(b){b.stopPropagation();try{a.handleBulkToggle(c.id,b.target.checked)}catch(d){}}}))),React.createElement("tr",null,b,React.createElement("td",{className:"username",role:"button",tabIndex:"0","aria-expanded":a.pressed,"aria-pressed":a.pressed,"aria-haspopup":"true","aria-controls":"user_popup_"+e(d.title)+"_"+c.id,"aria-flowto":"user_popup_"+e(d.title)+"_"+c.id,onFocus:function(b){try{a.handleFocus()}catch(c){}},onBlur:function(b){try{a.handleBlur()}catch(c){}},onClick:function(a){document.activeElement!==a.target&&a.target.focus()}},c.username),React.createElement("td",{className:"shy balanced checkbox"},React.createElement("input",{id:j,name:j,"aria-label":k,checked:c.active,type:"checkbox",onChange:function(a){return h.dispatch(i.updateUser(c.id,g(c,{$merge:{active:a.target.checked}})))}})))},q=React.createClass({displayName:"SettingsTableRowForm",mixins:[j],getInitialState:function(){return{asyncAction:void 0}},render:function(){var a=this.props,b=a.user,c=a.userGroup,d=!!b.nextUser&&React.createElement("div",null,React.createElement("a",{className:"button",href:"#bulk-"+c.id+"-"+b.nextUser.username,"aria-label":"Escape to Next User "+b.nextUser.username,onClick:function(d){console.log("bulk-"+c.id+"-"+b.username),a.handleNextBtnClicked(),document.getElementById("bulk-"+c.id+"-"+b.nextUser.username).focus()}},"Next User")),j="sudo__"+e(c.title)+"-"+c.id+"-"+b.id,k="active__"+e(c.title)+"-"+c.id+"-"+b.id;return React.createElement("tr",f({},a,{id:"user_popup_"+e(c.title)+"_"+b.id,role:"dialog","aria-labeledby":"user_popup_label_"+b.id,"aria-describedby":"user_popup_"+b.id+"_desc"}),React.createElement("td",{colSpan:a.colspan},React.createElement("form",{action:this.state.formAction,method:this.state.formMethod,onChange:this.updateFormData},React.createElement("h3",{hidden:!0,id:"user_popup_label_"+b.id},"Edit or Contact ",b.givenName," ",b.familyName),React.createElement("input",{name:"user_id",type:"hidden",value:b.id}),React.createElement("input",{name:"username",type:"hidden",value:b.username}),React.createElement("div",{className:"friendly-labels"},React.createElement("span",null,React.createElement("label",{"aria-hidden":!0,htmlFor:j},"Sudo: "),React.createElement("input",{"aria-label":"Sudo",id:j,name:j,checked:b.sudo,type:"checkbox",onChange:function(a){h.dispatch(i.updateUser(b.id,g(b,{$merge:{sudo:a.target.checked}})))}})),React.createElement("span",null,React.createElement("label",{"aria-hidden":!0,htmlForm:k},"Active: "),React.createElement("input",{"aria-label":"Active",id:k,name:k,checked:b.active,type:"checkbox",onChange:function(a){h.dispatch(i.updateUser(b.id,g(b,{$merge:{active:a.target.checked}})))}}))),React.createElement("p",{className:"subtle balanced oblique"},b.jobTitle),d,React.createElement("div",null,React.createElement("a",{className:"button",href:l.UPDATE_USER+b.id,onClick:function(a){a.preventDefault(),h.dispatch(i.updateQuickCreate({username:b.username,givenName:b.givenName,familyName:b.familyName,email:b.email,active:b.active,sudo:b.sudo,open:!0,updating:!0,id:b.id,roles:b.roles})),window.scrollTo(0,0)}},"Quick Edit"),React.createElement("a",{className:"button",href:l.UPDATE_USER+b.id},"Edit")),React.createElement("div",null,React.createElement("button",{type:"submit",formAction:"duplicate/user",className:"save"},"Duplicate"),React.createElement("button",{className:"delete",type:"submit",onClick:function(a){a.preventDefault(),a.stopPropagation(),h.dispatch(i.deleteUser(g(b,{$merge:{user_id:b.id}})))},formMethod:"post",formAction:l.USER_DELETE,"data-async-action":"deleteuser"},"Delete"),React.createElement("a",{className:"button",href:"mailto:"+b.email+"?subject=MODX%20Next"},"Email")),React.createElement("div",null,React.createElement("a",{className:"button",href:"https://"+a.slackChannel+".slack.com/messages/@"+b.username,target:"_blank"},"Slack DM")),React.createElement("div",{style:{marginTop:"1em"}},React.createElement("button",{formAction:l.USER_REMOVE_FROM_GROUP,onClick:function(a){a.preventDefault(),h.dispatch(i.removeUserFromGroup(b.id,c.id))}},"Remove from Group"))),React.createElement("footer",{id:"user_popup_"+b.id+"_desc",className:"subtle oblique balanced"},React.createElement("p",null,React.createElement("span",null,React.createElement("span",{className:"given-name"},b.givenName)," ",React.createElement("span",{className:"family-name"},b.familyName),"’","s"==b.familyName.slice(-1)?"":"s"," last login was Jan 23, 2016 4:52pm from Planet Earth")))))}});a.exports=o}]);