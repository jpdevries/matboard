!function(a){function b(d){if(c[d])return c[d].exports;var e=c[d]={exports:{},id:d,loaded:!1};return a[d].call(e.exports,e,e.exports,b),e.loaded=!0,e.exports}var c={};return b.m=a,b.c=c,b.p="",b(0)}([function(a,b,c){"use strict";var d=c(1);document.addEventListener("DOMContentLoaded",function(){new d.ManageUsers})},function(a,b,c){"use strict";var d=(c(2),c(3)),e=(c(4),c(7)),f=c(17),g=function(){e.subscribe(function(){console.log(e.getState())});var a=(0,d.connect)(function(a,b){return{users:a.users.sort(function(a,b){return a.username>b.username?1:-1}),userGroups:a.userGroups}})(f);ReactDOM.render(React.createElement(d.Provider,{store:e},React.createElement(a,null)),document.getElementById("manage-users-form"))};b.ManageUsers=g},function(a,b){a.exports=Redux},function(a,b){a.exports=ReactRedux},function(a,b,c){"use strict";c(5);var d="updateuser",e=function(a,b){return{type:d,id:a,user:b}};b.UPDATE_USER=d,b.updateUser=e;var f="addusergroup",g=function(a){return{type:f,userGroup:a}};b.ADD_USER_GROUP=f,b.addUserGroup=g;var h="addusertogroup",i=function(a,b){return{type:h,id:a,group:b}};b.ADD_USER_TO_GROUP=h,b.addUserToGroup=i;var j="removeuserfromgroup",k=function(a,b){return console.log("ru",a,b),{type:j,id:a,group:b}};b.REMOVE_USER_FROM_GROUP=j,b.removeUserFromGroup=k;var l="addusersuccess",m="addusererror",n=function(a){return console.log(l,a),{type:l,user:a}},o=function(a){return console.log(m,a),{type:m,user:a}},p=function(a){return function(b){return fetch("/api/add/user",{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify(a)}).then(function(a){if(a.state<200||a.state>=300){var b=new Error(a.statusText);throw b.response=a,b}return a}).then(function(a){return a.json()}).then(function(c){return b(n(a))})["catch"](function(c){return b(o(a))})}};b.ADD_USER_SUCCESS=l,b.ADD_USER_ERROR=m,b.addUser=p},function(a,b,c){c(6),a.exports=self.fetch.bind(self)},function(a,b){!function(a){"use strict";function b(a){if("string"!=typeof a&&(a=String(a)),/[^a-z0-9\-#$%&'*+.\^_`|~]/i.test(a))throw new TypeError("Invalid character in header field name");return a.toLowerCase()}function c(a){return"string"!=typeof a&&(a=String(a)),a}function d(a){var b={next:function(){var b=a.shift();return{done:void 0===b,value:b}}};return p.iterable&&(b[Symbol.iterator]=function(){return b}),b}function e(a){this.map={},a instanceof e?a.forEach(function(a,b){this.append(b,a)},this):a&&Object.getOwnPropertyNames(a).forEach(function(b){this.append(b,a[b])},this)}function f(a){return a.bodyUsed?Promise.reject(new TypeError("Already read")):void(a.bodyUsed=!0)}function g(a){return new Promise(function(b,c){a.onload=function(){b(a.result)},a.onerror=function(){c(a.error)}})}function h(a){var b=new FileReader;return b.readAsArrayBuffer(a),g(b)}function i(a){var b=new FileReader;return b.readAsText(a),g(b)}function j(){return this.bodyUsed=!1,this._initBody=function(a){if(this._bodyInit=a,"string"==typeof a)this._bodyText=a;else if(p.blob&&Blob.prototype.isPrototypeOf(a))this._bodyBlob=a;else if(p.formData&&FormData.prototype.isPrototypeOf(a))this._bodyFormData=a;else if(p.searchParams&&URLSearchParams.prototype.isPrototypeOf(a))this._bodyText=a.toString();else if(a){if(!p.arrayBuffer||!ArrayBuffer.prototype.isPrototypeOf(a))throw new Error("unsupported BodyInit type")}else this._bodyText="";this.headers.get("content-type")||("string"==typeof a?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):p.searchParams&&URLSearchParams.prototype.isPrototypeOf(a)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},p.blob?(this.blob=function(){var a=f(this);if(a)return a;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))},this.arrayBuffer=function(){return this.blob().then(h)},this.text=function(){var a=f(this);if(a)return a;if(this._bodyBlob)return i(this._bodyBlob);if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)}):this.text=function(){var a=f(this);return a?a:Promise.resolve(this._bodyText)},p.formData&&(this.formData=function(){return this.text().then(m)}),this.json=function(){return this.text().then(JSON.parse)},this}function k(a){var b=a.toUpperCase();return q.indexOf(b)>-1?b:a}function l(a,b){b=b||{};var c=b.body;if(l.prototype.isPrototypeOf(a)){if(a.bodyUsed)throw new TypeError("Already read");this.url=a.url,this.credentials=a.credentials,b.headers||(this.headers=new e(a.headers)),this.method=a.method,this.mode=a.mode,c||(c=a._bodyInit,a.bodyUsed=!0)}else this.url=a;if(this.credentials=b.credentials||this.credentials||"omit",!b.headers&&this.headers||(this.headers=new e(b.headers)),this.method=k(b.method||this.method||"GET"),this.mode=b.mode||this.mode||null,this.referrer=null,("GET"===this.method||"HEAD"===this.method)&&c)throw new TypeError("Body not allowed for GET or HEAD requests");this._initBody(c)}function m(a){var b=new FormData;return a.trim().split("&").forEach(function(a){if(a){var c=a.split("="),d=c.shift().replace(/\+/g," "),e=c.join("=").replace(/\+/g," ");b.append(decodeURIComponent(d),decodeURIComponent(e))}}),b}function n(a){var b=new e,c=(a.getAllResponseHeaders()||"").trim().split("\n");return c.forEach(function(a){var c=a.trim().split(":"),d=c.shift().trim(),e=c.join(":").trim();b.append(d,e)}),b}function o(a,b){b||(b={}),this.type="default",this.status=b.status,this.ok=this.status>=200&&this.status<300,this.statusText=b.statusText,this.headers=b.headers instanceof e?b.headers:new e(b.headers),this.url=b.url||"",this._initBody(a)}if(!a.fetch){var p={searchParams:"URLSearchParams"in a,iterable:"Symbol"in a&&"iterator"in Symbol,blob:"FileReader"in a&&"Blob"in a&&function(){try{return new Blob,!0}catch(a){return!1}}(),formData:"FormData"in a,arrayBuffer:"ArrayBuffer"in a};e.prototype.append=function(a,d){a=b(a),d=c(d);var e=this.map[a];e||(e=[],this.map[a]=e),e.push(d)},e.prototype["delete"]=function(a){delete this.map[b(a)]},e.prototype.get=function(a){var c=this.map[b(a)];return c?c[0]:null},e.prototype.getAll=function(a){return this.map[b(a)]||[]},e.prototype.has=function(a){return this.map.hasOwnProperty(b(a))},e.prototype.set=function(a,d){this.map[b(a)]=[c(d)]},e.prototype.forEach=function(a,b){Object.getOwnPropertyNames(this.map).forEach(function(c){this.map[c].forEach(function(d){a.call(b,d,c,this)},this)},this)},e.prototype.keys=function(){var a=[];return this.forEach(function(b,c){a.push(c)}),d(a)},e.prototype.values=function(){var a=[];return this.forEach(function(b){a.push(b)}),d(a)},e.prototype.entries=function(){var a=[];return this.forEach(function(b,c){a.push([c,b])}),d(a)},p.iterable&&(e.prototype[Symbol.iterator]=e.prototype.entries);var q=["DELETE","GET","HEAD","OPTIONS","POST","PUT"];l.prototype.clone=function(){return new l(this)},j.call(l.prototype),j.call(o.prototype),o.prototype.clone=function(){return new o(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new e(this.headers),url:this.url})},o.error=function(){var a=new o(null,{status:0,statusText:""});return a.type="error",a};var r=[301,302,303,307,308];o.redirect=function(a,b){if(r.indexOf(b)===-1)throw new RangeError("Invalid status code");return new o(null,{status:b,headers:{location:a}})},a.Headers=e,a.Request=l,a.Response=o,a.fetch=function(a,b){return new Promise(function(c,d){function e(){return"responseURL"in g?g.responseURL:/^X-Request-URL:/m.test(g.getAllResponseHeaders())?g.getResponseHeader("X-Request-URL"):void 0}var f;f=l.prototype.isPrototypeOf(a)&&!b?a:new l(a,b);var g=new XMLHttpRequest;g.onload=function(){var a={status:g.status,statusText:g.statusText,headers:n(g),url:e()},b="response"in g?g.response:g.responseText;c(new o(b,a))},g.onerror=function(){d(new TypeError("Network request failed"))},g.ontimeout=function(){d(new TypeError("Network request failed"))},g.open(f.method,f.url,!0),"include"===f.credentials&&(g.withCredentials=!0),"responseType"in g&&p.blob&&(g.responseType="blob"),f.headers.forEach(function(a,b){g.setRequestHeader(b,a)}),g.send("undefined"==typeof f._bodyInit?null:f._bodyInit)})},a.fetch.polyfill=!0}}("undefined"!=typeof self?self:this)},function(a,b,c){"use strict";var d=c(2),e=d.createStore,f=d.applyMiddleware,g=c(8)["default"],h=c(9),i=e(h.manageUsersReducer,f(g));a.exports=i},function(a,b){"use strict";function c(a){return function(b){var c=b.dispatch,d=b.getState;return function(b){return function(e){return"function"==typeof e?e(c,d,a):b(e)}}}}b.__esModule=!0;var d=c();d.withExtraArgument=c,b["default"]=d},function(a,b,c){"use strict";function d(a,b,c){return b in a?Object.defineProperty(a,b,{value:c,enumerable:!0,configurable:!0,writable:!0}):a[b]=c,a}var e=c(4),f=c(2).combineReducers,g=c(10),h=function(){for(var a=[],b=document.querySelectorAll("section.user-group"),c=0;c<b.length;c++){var d=b[c],e=parseInt(d.getAttribute("data-user-group-id")),f=d.querySelector(".name").innerHTML;a.push({id:e,title:f})}return a}();console.log("initialUserGroups",h);var i=function(){for(var a=[],b=document.querySelectorAll("tr.user-row"),c=[],d=0;d<b.length;d++){var e=b[d],f=e.getAttribute("data-user-groups").split(",").map(function(a){return parseInt(a)}),g=e.querySelector(".username").innerHTML,h=e.getAttribute("data-email"),i=e.getAttribute("data-user-id"),j=e.nextElementSibling,k=j.querySelector(".givenName").innerHTML,l=(j.querySelector("input.sudo").checked,j.querySelector("input.active").checked,j.querySelector(".jobTitle").innerHTML);c[i]||a.push({id:i,username:g,givenName:k,familyName:"",email:h,active:!0,sudo:!0,jobTitle:l,userGroups:f}),c[i]=!0}return a}();console.log(i);var j={users:i,userGroups:h,quickCreate:{username:"jpdevries",givenName:"John-Paul",familyName:"de Vries",email:"mail@devries.jp",active:!0,sudo:!0}},k=function(a,b){a=a||j.users,console.log(b);var c=0;switch(a.map(function(a,d){a.id==b.id&&(c=d)}),b.type){case e.UPDATE_USER:return g(a,d({},c,{$merge:b.user}));case e.ADD_USER_TO_GROUP:return g(a,d({},c,{$apply:function(a){return g(a,{$merge:{userGroups:g(a.userGroups,{$push:[b.group]})}})}}));case e.REMOVE_USER_FROM_GROUP:return g(a,d({},c,{$apply:function(d){return g(d,{$merge:{userGroups:a[c].userGroups.map(function(a){return a!==b.group?a:void 0}).filter(function(a){return void 0!==a})}})}}));case e.ADD_USER_SUCCESS:if(console.log(e.ADD_USER_SUCCESS,b.user),void 0===b.user.id){var f=0;a.map(function(a,b){f=Math.max(a.id,f)}),b.user.id=f+1}return g(a,{$push:[b.user]})}return a},l=function(a,b){return a=a||j.quickCreate},m=function(a,b){switch(a=a||j.userGroups,b.type){case e.ADD_USER_GROUP:if(void 0===b.userGroup.id){var c=0;a.map(function(a,b){c=Math.max(a.id,c)}),b.userGroup.id=c+1}return g(a,{$push:[b.userGroup]})}return a},n=f({quickCreate:l,users:k,userGroups:m});b.manageUsersReducer=n},function(a,b,c){a.exports=c(11)},function(a,b,c){(function(b){"use strict";function d(a){return Array.isArray(a)?a.concat():a&&"object"==typeof a?h(new a.constructor,a):a}function e(a,c,d){Array.isArray(a)?void 0:"production"!==b.env.NODE_ENV?j(!1,"update(): expected target of %s to be an array; got %s.",d,a):g("1",d,a);var e=c[d];Array.isArray(e)?void 0:"production"!==b.env.NODE_ENV?j(!1,"update(): expected spec of %s to be an array; got %s. Did you forget to wrap your parameter in an array?",d,e):g("2",d,e)}function f(a,c){if("object"!=typeof c?"production"!==b.env.NODE_ENV?j(!1,"update(): You provided a key path to update() that did not contain one of %s. Did you forget to include {%s: ...}?",r.join(", "),o):g("3",r.join(", "),o):void 0,k.call(c,o))return 1!==Object.keys(c).length?"production"!==b.env.NODE_ENV?j(!1,"Cannot have more than one key in an object with %s",o):g("4",o):void 0,c[o];var i=d(a);if(k.call(c,p)){var t=c[p];t&&"object"==typeof t?void 0:"production"!==b.env.NODE_ENV?j(!1,"update(): %s expects a spec of type 'object'; got %s",p,t):g("5",p,t),i&&"object"==typeof i?void 0:"production"!==b.env.NODE_ENV?j(!1,"update(): %s expects a target of type 'object'; got %s",p,i):g("6",p,i),h(i,c[p])}k.call(c,l)&&(e(a,c,l),c[l].forEach(function(a){i.push(a)})),k.call(c,m)&&(e(a,c,m),c[m].forEach(function(a){i.unshift(a)})),k.call(c,n)&&(Array.isArray(a)?void 0:"production"!==b.env.NODE_ENV?j(!1,"Expected %s target to be an array; got %s",n,a):g("7",n,a),Array.isArray(c[n])?void 0:"production"!==b.env.NODE_ENV?j(!1,"update(): expected spec of %s to be an array of arrays; got %s. Did you forget to wrap your parameters in an array?",n,c[n]):g("8",n,c[n]),c[n].forEach(function(a){Array.isArray(a)?void 0:"production"!==b.env.NODE_ENV?j(!1,"update(): expected spec of %s to be an array of arrays; got %s. Did you forget to wrap your parameters in an array?",n,c[n]):g("8",n,c[n]),i.splice.apply(i,a)})),k.call(c,q)&&("function"!=typeof c[q]?"production"!==b.env.NODE_ENV?j(!1,"update(): expected spec of %s to be a function; got %s.",q,c[q]):g("9",q,c[q]):void 0,i=c[q](i));for(var u in c)s.hasOwnProperty(u)&&s[u]||(i[u]=f(a[u],c[u]));return i}var g=c(13),h=c(14),i=c(15),j=c(16),k={}.hasOwnProperty,l=i({$push:null}),m=i({$unshift:null}),n=i({$splice:null}),o=i({$set:null}),p=i({$merge:null}),q=i({$apply:null}),r=[l,m,n,o,p,q],s={};r.forEach(function(a){s[a]=!0}),a.exports=f}).call(b,c(12))},function(a,b){function c(){l&&j&&(l=!1,j.length?k=j.concat(k):m=-1,k.length&&d())}function d(){if(!l){var a=g(c);l=!0;for(var b=k.length;b;){for(j=k,k=[];++m<b;)j&&j[m].run();m=-1,b=k.length}j=null,l=!1,h(a)}}function e(a,b){this.fun=a,this.array=b}function f(){}var g,h,i=a.exports={};!function(){try{g=setTimeout}catch(a){g=function(){throw new Error("setTimeout is not defined")}}try{h=clearTimeout}catch(a){h=function(){throw new Error("clearTimeout is not defined")}}}();var j,k=[],l=!1,m=-1;i.nextTick=function(a){var b=new Array(arguments.length-1);if(arguments.length>1)for(var c=1;c<arguments.length;c++)b[c-1]=arguments[c];k.push(new e(a,b)),1!==k.length||l||g(d,0)},e.prototype.run=function(){this.fun.apply(null,this.array)},i.title="browser",i.browser=!0,i.env={},i.argv=[],i.version="",i.versions={},i.on=f,i.addListener=f,i.once=f,i.off=f,i.removeListener=f,i.removeAllListeners=f,i.emit=f,i.binding=function(a){throw new Error("process.binding is not supported")},i.cwd=function(){return"/"},i.chdir=function(a){throw new Error("process.chdir is not supported")},i.umask=function(){return 0}},function(a,b){"use strict";function c(a){for(var b=arguments.length-1,c="Minified React error #"+a+"; visit http://facebook.github.io/react/docs/error-decoder.html?invariant="+a,d=0;d<b;d++)c+="&args[]="+encodeURIComponent(arguments[d+1]);c+=" for the full message or use the non-minified dev environment for full errors and additional helpful warnings.";var e=new Error(c);throw e.name="Invariant Violation",e.framesToPop=1,e}a.exports=c},function(a,b){"use strict";function c(a){if(null===a||void 0===a)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(a)}function d(){try{if(!Object.assign)return!1;var a=new String("abc");if(a[5]="de","5"===Object.getOwnPropertyNames(a)[0])return!1;for(var b={},c=0;c<10;c++)b["_"+String.fromCharCode(c)]=c;var d=Object.getOwnPropertyNames(b).map(function(a){return b[a]});if("0123456789"!==d.join(""))return!1;var e={};return"abcdefghijklmnopqrst".split("").forEach(function(a){e[a]=a}),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},e)).join("")}catch(f){return!1}}var e=Object.prototype.hasOwnProperty,f=Object.prototype.propertyIsEnumerable;a.exports=d()?Object.assign:function(a,b){for(var d,g,h=c(a),i=1;i<arguments.length;i++){d=Object(arguments[i]);for(var j in d)e.call(d,j)&&(h[j]=d[j]);if(Object.getOwnPropertySymbols){g=Object.getOwnPropertySymbols(d);for(var k=0;k<g.length;k++)f.call(d,g[k])&&(h[g[k]]=d[g[k]])}}return h}},function(a,b){"use strict";var c=function(a){var b;for(b in a)if(a.hasOwnProperty(b))return b;return null};a.exports=c},function(a,b,c){(function(b){"use strict";function c(a,c,d,e,f,g,h,i){if("production"!==b.env.NODE_ENV&&void 0===c)throw new Error("invariant requires an error message argument");if(!a){var j;if(void 0===c)j=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var k=[d,e,f,g,h,i],l=0;j=new Error(c.replace(/%s/g,function(){return k[l++]})),j.name="Invariant Violation"}throw j.framesToPop=1,j}}a.exports=c}).call(b,c(12))},function(a,b,c){"use strict";var d=(c(4),c(7),c(18)),e=c(19),f=React.createClass({displayName:"ManageUsersForm",getInitialState:function(){return{filter:void 0,filterBy:void 0}},render:function(){var a=this,b=this.props,c=b.userGroups.filter(function(b){return void 0===a.state.filterBy||a.state.filterBy==b.id}).map(function(c){return React.createElement(e,{bulkActions:!0,key:c.id,filter:a.state.filter,users:b.users.filter(function(a){return a.userGroups.includes(c.id)}),title:c.title,userGroup:c})});return React.createElement("div",null,React.createElement(d,{handleFilterBy:function(b){return a.setState({filterBy:isNaN(b)?void 0:b})},handleFilter:function(b){return a.setState({filter:b.length?b:void 0})}}),React.createElement("div",{className:"settings-grid"},c))}});a.exports=f},function(a,b,c){"use strict";var d=c(4),e=c(7),f=React.createClass({displayName:"ManageUserFormHeader",getInitialState:function(){return{quickCreateOpen:!1}},render:function(){var a=this,b=this.props,c=!!this.state.quickCreateOpen&&React.createElement("fieldset",null,React.createElement("legend",null,"Quick Create User"),React.createElement("div",{className:"n field-group"},React.createElement("div",{className:"field-username"},React.createElement("label",{"for":"username",id:"username-label"},"Username"),React.createElement("input",{type:"text",ref:"quickCreateUsername",autoFocus:!0,"aria-describedby":"username-label",name:"username",id:"username",className:"nickname","aria-required":"true","aria-invalid":"false",required:!0})),React.createElement("div",{className:"field-given-name"},React.createElement("label",{"for":"given-name"},"First Name"),React.createElement("input",{type:"text",ref:"quickCreateGivenName",name:"given-name",id:"given-name",className:"given-name"})),React.createElement("div",{className:"field-family-name"},React.createElement("label",{"for":"family-name"},"Last Name"),React.createElement("input",{type:"text",ref:"quickCreateFamilyName",name:"family-name",id:"family-name",className:"family-name"})),React.createElement("div",{className:"field-email"},React.createElement("label",{"for":"email"},"Email"),React.createElement("input",{type:"email",ref:"quickCreateEmail",name:"email",id:"email",className:"email","aria-required":"true","aria-invalid":"false",required:!0}))),React.createElement("div",{className:"field-group user-group-field user-status-field"},React.createElement("div",{className:"field"},React.createElement("input",{checked:!0,type:"checkbox",ref:"quickCreateUserActive",name:"user-active",id:"user-active"}),React.createElement("label",{"for":"user-active"},"Active")),React.createElement("div",{className:"field"},React.createElement("input",{type:"checkbox",ref:"quickCreateUserSudo",name:"user-sudo",id:"user-sudo"}),React.createElement("label",{"for":"user-sudo"},"Sudo"))),React.createElement("div",null,React.createElement("button",{type:"submit"},"Submit")),React.createElement("div",{className:"field-group"},React.createElement("fieldset",{className:"field"},React.createElement("legend",null,"User Groups"),React.createElement("p",null,"Users can belong to any number of User Groups. User are assigned Roles that define their priveldges as a member of the User Group. A user can below to the same User Group with multiple roles."),React.createElement("fieldset",null,React.createElement("legend",null,"Administrator"),React.createElement("label",{"for":"user-group-editor-roles[]"},"Roles"),React.createElement("label",null,React.createElement("input",{type:"checkbox",checked:!0,ref:"userGroupEditorRoles",name:"user-group-editor-roles[]"})," Editor"),React.createElement("label",null,React.createElement("input",{type:"checkbox",ref:"userGroupEditorRoles",name:"user-group-editor-roles[]"})," Super User")),React.createElement("fieldset",null,React.createElement("legend",null,"Editor"),React.createElement("label",{"for":"user-group-editor-roles[]"},"Roles"),React.createElement("label",null,React.createElement("input",{type:"checkbox",name:"user-group-editor-roles[]"})," Editor"),React.createElement("label",null,React.createElement("input",{type:"checkbox",name:"user-group-editor-roles[]"})," Super User")))),React.createElement("footer",null,React.createElement("button",{type:"submit"},"Submit"))),f=!this.state.quickCreateOpen&&React.createElement("button",{formaction:"/quick-create/user",onClick:function(b){return a.setState({quickCreateOpen:!0})}},"Quick Create User");return React.createElement("header",null,React.createElement("h1",null,"Manage Users"),React.createElement("div",{className:"create-user-module"},React.createElement("form",{ref:"createSettingForm",action:"/add/user",method:"post",className:"create-setting-form",onSubmit:function(b){b.preventDefault(),e.dispatch(d.addUser({username:a.refs.quickCreateUsername.value,givenName:a.refs.quickCreateGivenName.value,familyName:a.refs.quickCreateFamilyName.value,email:a.refs.quickCreateEmail.value,active:a.refs.quickCreateUserActive.checked,sudo:a.refs.quickCreateUserSudo.checked,userGroups:[1]}))}},React.createElement("div",{className:"top-bar"},f,React.createElement("button",{id:"create-user",formaction:"./../user-edit/index.html"},"Create User")),c)),React.createElement("hr",null),React.createElement("div",null,React.createElement("h3",null,"Search Users"),React.createElement("form",{action:"#",id:"search",className:"search-settings"},React.createElement("label",{"for":"search-users"},React.createElement("span",{"a11y-hidden":!0},"Search: "),React.createElement("input",{name:"search-users",id:"search-users",type:"text",placeholder:"Search for any User. We'll try and find them.",onChange:function(b){try{a.props.handleFilter(b.target.value)}catch(c){}}})),React.createElement("button",{type:"submit"},"Search"),React.createElement("label",{"for":"filter-by"},"Filter by:"),React.createElement("select",{name:"filter-by",id:"filter-by",onChange:function(a){try{b.handleFilterBy(parseInt(a.target.value))}catch(c){console.log(c)}}},React.createElement("option",{checked:!0,value:""},"All"),React.createElement("option",{value:"1"},"Editors"),React.createElement("option",{value:"0"},"Administrators"))),React.createElement("p",null,"Below you will users who have logged in recently per user group.")),React.createElement("hr",null))}});a.exports=f},function(a,b,c){"use strict";function d(a,b,c){return b in a?Object.defineProperty(a,b,{value:c,enumerable:!0,configurable:!0,writable:!0}):a[b]=c,a}var e=c(10),f=c(7),g=c(4),h=(React.createClass({displayName:"SettingTableRowGroup",getInitialState:function(){return{showSettings:!1}},render:function(){var a=this,b=this.props,c=b.user;return React.createElement(k,{user:c,className:"contextual-setting",handleBlur:function(b){return console.log("showSetting",a.state.showSetting)},handleFocus:function(b){return console.log("showSetting",a.state.showSetting)}})}}),function(a){return React.createElement("form",{action:"/bulk/actions",method:"post"},React.createElement("fieldset",null,React.createElement("legend",null,"Bulk Actions"),React.createElement("button",{disabled:!a.emails.length,formAction:"bulkactions/activate"},"Activate"),React.createElement("button",{disabled:!a.emails.length,formAction:"bulkactions/Suspend"},"Suspend"),React.createElement("button",{disabled:!a.emails.length,formAction:"bulkactions/delete"},"Delete"),React.createElement("button",{disabled:!a.emails.length,formAction:"mailto:"+a.emails.join(",")+"?subject=MODX%20Next",formTarget:"_blank"},"Email")))}),i=React.createClass({displayName:"SettingsTable",getInitialState:function(){return{userFormsToShow:{}}},render:function(){var a,b=this,c=this.props;c.bulkActions&&(a=React.createElement("th",null,React.createElement("input",{type:"checkbox",onChange:function(a){try{b.props.handleBulkAllCheck(a.target.checked)}catch(c){}}})));var f=c.users.map(function(a){return[React.createElement(k,{user:a,className:"contextual-setting",bulkToggle:void 0!==c.bulkToggledUsers[a.id]&&c.bulkToggledUsers[a.id],bulkActions:c.bulkActions,handleFocus:function(c){return b.setState({userFormsToShow:e({},d({},a.id,{$set:!0}))})},handleBulkToggle:function(a,b){try{c.handleBulkToggle(a,b)}catch(d){}}}),b.state.userFormsToShow[a.id]?React.createElement(l,{user:a,userGroup:c.userGroup,colspan:c.bulkActions?"3":"2"}):void 0]});return React.createElement("table",{className:"settings-table"},React.createElement("thead",null,React.createElement("tr",null,a,React.createElement("th",null,"User"),React.createElement("th",null,"Active"))),React.createElement("tbody",null,f))}}),j=React.createClass({displayName:"SettingsGridSection",getInitialState:function(){return{bulkToggledUsers:{}}},render:function(){var a=this,b=this.props,c=b.users,f=void 0!==b.minimumUsersBulkAction?b.minimumUsersBulkAction:3,g=c.map(function(b){return a.state.bulkToggledUsers[b.id]?b.email:void 0}).filter(function(a){return a});void 0!==b.filter&&b.filter.length&&(c=c.filter(function(a){return a.username.indexOf(b.filter)>-1}));var j=c.length>=f?React.createElement(h,{emails:g}):void 0;return console.log(g),React.createElement("section",{id:"core-settings"},React.createElement("header",null,React.createElement("h2",null,b.title)),React.createElement("div",null,j,React.createElement(i,{bulkActions:c.length>=f&&b.bulkActions,users:c,bulkToggledUsers:this.state.bulkToggledUsers,userGroup:b.userGroup,handleBulkToggle:function(b,c){a.setState({bulkToggledUsers:e(a.state.bulkToggledUsers,d({},b,{$set:c}))})},handleBulkAllCheck:function(b){console.log("handleBulkAllCheck",b);var d={};b&&c.map(function(a){d[a.id]=!0}),a.setState({bulkToggledUsers:d})}}),j),React.createElement("footer",null,React.createElement("p",null,React.createElement("a",{href:"#"},"View all ",b.title," users"))))}}),k=function(a){var b,c=a.user,d="bulk-"+c.username;return a.bulkActions&&(b=React.createElement("td",null,React.createElement("label",null,React.createElement("input",{type:"checkbox",name:d,checked:a.bulkToggle,onChange:function(b){try{a.handleBulkToggle(c.id,b.target.checked)}catch(d){}}})))),React.createElement("tr",{tabIndex:"0",onFocus:function(b){try{a.handleFocus()}catch(c){}},onBlur:function(b){try{a.handleBlur()}catch(c){}}},b,React.createElement("td",null,c.username),React.createElement("td",null,React.createElement("label",null,React.createElement("span",{"a11y-hidden":!0},"Active: "),React.createElement("input",{checked:c.active,type:"checkbox",onChange:function(a){return f.dispatch(g.updateUser(c.id,{active:a.target.checked}))}}))))},l=function(a){var b=a.user,c=a.userGroup;return React.createElement("tr",a,React.createElement("td",{colSpan:a.colspan},React.createElement("form",{action:"/",method:"post"},React.createElement("input",{name:"user_id",type:"hidden",value:b.id}),React.createElement("input",{name:"username",type:"hidden",value:b.username}),React.createElement("div",{className:"friendly-labels"},React.createElement("label",null,"Sudo: ",React.createElement("input",{name:"sudo",checked:b.sudo,type:"checkbox",onChange:function(a){f.dispatch(g.updateUser(b.id,{sudo:a.target.checked}))}})),React.createElement("label",null,"Active: ",React.createElement("input",{name:"active",checked:b.active,type:"checkbox",onChange:function(a){f.dispatch(g.updateUser(b.id,{active:a.target.checked}))}}))),React.createElement("p",{className:"subtle balanced oblique"},b.jobTitle),React.createElement("div",null,React.createElement("button",{type:"submit",className:"save"},"Save")),React.createElement("div",null,React.createElement("button",{className:"save"},"Next User")),React.createElement("div",null,React.createElement("button",{type:"submit",formAction:"./quick-edit/user.html"},"Quick Edit"),React.createElement("button",{type:"submit",formAction:"./../user-edit/index.html"},"Edit")),React.createElement("div",null,React.createElement("button",{type:"submit",formAction:"duplicate/user",className:"save"},"Duplicate"),React.createElement("button",{type:"submit",formAction:"/api/delete/user"},"Delete"),React.createElement("button",{type:"submit",formAction:"mailto:"+b.email+"?subject=MODX%20Next",formTarget:"_blank"},"Email")),React.createElement("div",null,React.createElement("button",{type:"submit",className:"save"},"Save")),React.createElement("div",{style:{marginTop:"1em"}},React.createElement("button",{formAction:"removefromgroup/user",onClick:function(a){a.preventDefault(),f.dispatch(g.removeUserFromGroup(b.id,c.id))}},"Remove from Group"))),React.createElement("footer",{className:"subtle oblique balanced"},React.createElement("p",null,b.givenName," ",b.familyName,"’ last login was Jan 23, 2016 4:52pm from Planet Earth"))))};a.exports=j}]);